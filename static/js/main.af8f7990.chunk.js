(this["webpackJsonpreact-orcamento"]=this["webpackJsonpreact-orcamento"]||[]).push([[0],{252:function(e,t,i){},403:function(e,t,i){},404:function(e,t,i){},406:function(e,t,i){"use strict";i.r(t);var c=i(0),n=i.n(c),r=i(28),a=i.n(r),s=i(25),o=i(33),d=i(51),l=Object(d.a)(),u=i(410),j=i(73),b=i(426),h=i(427),p=i(428),O=i(70),m=(i(252),"/react-orcamento"),x="PRODUCT_STORE",f="BUDGET_STORE",v="CLIENT_STORE",g=i(3),y=u.a.Sider,P=function(e){return Object(g.jsxs)(y,{trigger:null,collapsible:!0,collapsed:e.collapse,children:[Object(g.jsx)(O.a,{to:"".concat(m,"/"),children:Object(g.jsx)("h4",{className:e.collapse?"logo-collapse":"logo",children:"Gerenciador de Or\xe7amento"})}),Object(g.jsxs)(j.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"],children:[Object(g.jsx)(j.a.Item,{icon:Object(g.jsx)(b.a,{}),children:Object(g.jsx)(O.a,{to:"".concat(m,"/"),children:"Home"})},"1"),Object(g.jsx)(j.a.Item,{icon:Object(g.jsx)(h.a,{}),children:Object(g.jsx)(O.a,{to:"".concat(m,"/clients"),children:"Clientes"})},"2"),Object(g.jsx)(j.a.Item,{icon:Object(g.jsx)(p.a,{}),children:Object(g.jsx)(O.a,{to:"".concat(m,"/products"),children:"Produtos"})},"3"),Object(g.jsx)(j.a.Item,{icon:Object(g.jsx)(h.a,{}),children:Object(g.jsx)(O.a,{to:"".concat(m,"/budgets"),children:"Or\xe7amentos"})},"4")]})]})},N=i(422),D=i(425),S=i(49),C=i(415),I=i(138),T=i(429),w=i(430),k=i(82),E=i(112),q=i(35),F=i(113),R=function(){function e(t,i,c,n,r,a){Object(q.a)(this,e),this.id=void 0,this.title=void 0,this.description=void 0,this.providerPrice=void 0,this.salePrice=void 0,this.discount=void 0,this.active=void 0,Object.setPrototypeOf(this,e.prototype),this.id=t,this.title=i,this.description=c,this.providerPrice=n,this.salePrice=r,this.discount=a,this.active=!0}return Object(F.a)(e,[{key:"toDTO",value:function(){return{title:this.title,description:this.description,providerPrice:this.providerPrice,salePrice:this.salePrice,discount:this.discount,active:this.active}}}]),e}(),z=function e(t,i,c){Object(q.a)(this,e),this.to=t,this.subject=i,this.fileBase64=c},B=function e(t,i,c,n,r){Object(q.a)(this,e),this.id=void 0,this.name=void 0,this.address=void 0,this.city=void 0,this.email=void 0,Object.setPrototypeOf(this,e.prototype),this.id=t,this.name=i,this.address=c,this.city=n,this.email=r},V=function(){function e(t,i,c,n,r){Object(q.a)(this,e),this.id=void 0,this.startDate=void 0,this.endDate=void 0,this.client=void 0,this.products=void 0,this.notes=void 0,this.discount=0,this.total=0,this.subTotal=0,Object.setPrototypeOf(this,e.prototype),Object.setPrototypeOf(this,(this instanceof e?this.constructor:void 0).prototype),this.id=t,this.startDate=new Date,this.endDate=i,this.client=c,this.products=n,this.notes=r,this.discount=0,this.calculateSubTotal(),this.calculateTotal()}return Object(F.a)(e,[{key:"calculateSubTotal",value:function(){var e=0;return this.products.forEach((function(t){e+=t.total})),this.subTotal=this.total=e,this.subTotal}},{key:"applyDiscount",value:function(e){isNaN(e)&&(e=0),this.discount=e,this.total=this.total*(1-e/100)}},{key:"calculateTotal",value:function(){return this.calculateSubTotal(),this.applyDiscount(this.discount),this.total}}]),e}(),A=function(){function e(t,i,c,n,r,a,s){Object(q.a)(this,e),this.quantity=void 0,this.id=void 0,this.title=void 0,this.description=void 0,this.providerPrice=void 0,this.salePrice=void 0,this.discount=void 0,this.active=void 0,this.total=void 0,Object.setPrototypeOf(this,e.prototype),this.id=t,this.title=i,this.description=c,this.providerPrice=n,this.salePrice=r,this.discount=0,this.active=!0,this.quantity=s,this.total=0,this.calculateSubTotal(),this.applyDiscount(a)}return Object(F.a)(e,[{key:"calculateSubTotal",value:function(){return this.total=this.salePrice*this.quantity,this.applyDiscount(this.discount),this.total}},{key:"applyDiscount",value:function(e){this.discount=e,this.total=this.total*(1-this.discount/100)}},{key:"toDTO",value:function(){return{title:this.title,description:this.description,providerPrice:this.providerPrice,salePrice:this.salePrice,discount:this.discount,active:this.active,quantity:this.quantity}}}]),e}();function M(e){var t=localStorage.getItem(e)||"";try{if(!t)throw new Error("No data found");return JSON.parse(t)}catch(i){return null}}function G(e,t){t&&localStorage.setItem(e,JSON.stringify(t))}var $=Object(c.createContext)({products:[],addProduct:function(){return null},removeProduct:function(){return null},editProduct:function(){return null}}),L=function(e){var t=Object(c.useState)(function(){var e=M(x)||[],t=[];return e&&e.forEach((function(e){t.push(new R(e.id,e.title,e.description,e.providerPrice,e.salePrice,e.discount))})),t}()),i=Object(s.a)(t,2),n=i[0],r=i[1];Object(c.useEffect)((function(){G(x,n)}),[n]);var a={products:n,addProduct:function(e){var t=new R(E.Guid.newGuid().toString(),e.title,e.description,e.providerPrice,e.salePrice,e.discount);r([].concat(Object(k.a)(n),[t]))},removeProduct:function(e){var t=n.filter((function(t){return t.id!==e}));r(t)},editProduct:function(e,t){var i=n.findIndex((function(t){return t.id===e}));-1!==i&&(n[i].active=t.active,n[i].title=t.title,n[i].description=t.description,n[i].discount=t.discount,n[i].salePrice=t.salePrice,n[i].providerPrice=t.providerPrice,r(Object(k.a)(n)))}};return Object(g.jsx)($.Provider,{value:a,children:e.children})},H=Object(c.createContext)({budgets:[],addBudget:function(){return null},removeBudget:function(){return null},editBudget:function(){return null}}),J=function(e){var t=Object(c.useState)(function(){var e=M(f)||[],t=[];return e&&e.forEach((function(e){var i=[];e.products.forEach((function(e){i.push(new A(e.id,e.title,e.description,e.providerPrice,e.salePrice,e.discount,e.quantity))})),t.push(new V(e.id,e.endDate,e.client,i,e.notes))})),t}()),i=Object(s.a)(t,2),n=i[0],r=i[1];Object(c.useEffect)((function(){G(f,n)}),[n]);var a={budgets:n,addBudget:function(e){var t=new V(E.Guid.newGuid().toString(),e.endDate,e.client,e.products,e.notes);r([].concat(Object(k.a)(n),[t]))},removeBudget:function(e){var t=n.filter((function(t){return t.id!==e}));r(t)},editBudget:function(e,t){var i=n.findIndex((function(t){return t.id===e}));-1!==i&&(n[i].startDate=t.startDate,n[i].endDate=t.endDate,n[i].client=t.client,n[i].discount=t.discount,n[i].notes=t.notes,n[i].products=t.products,n[i].total=t.total,r(Object(k.a)(n)))}};return Object(g.jsx)(H.Provider,{value:a,children:e.children})},Q=Object(c.createContext)({clients:[],addClient:function(){return null},removeClient:function(){return null},editClient:function(){return null}}),U=function(e){var t=Object(c.useState)(M(v)||[]),i=Object(s.a)(t,2),n=i[0],r=i[1];Object(c.useEffect)((function(){G(v,n)}),[n]);var a={clients:n,addClient:function(e){var t=new B(E.Guid.newGuid().toString(),e.name,e.email,e.address,e.city);r([].concat(Object(k.a)(n),[t]))},removeClient:function(e){var t=n.filter((function(t){return t.id!==e}));r(t)},editClient:function(e,t){var i=n.findIndex((function(t){return t.id===e}));-1!==i&&(n[i].name=t.name,n[i].address=t.address,n[i].city=t.city,n[i].email=t.email,r(Object(k.a)(n)))}};return Object(g.jsx)(Q.Provider,{value:a,children:e.children})},_=N.a.confirm,K=function(e){var t=e.setProductId,i=Object(c.useContext)($),n=i.products,r=i.removeProduct,a=[{title:"Nome",dataIndex:"title"},{title:"Descri\xe7\xe3o",dataIndex:"description"},{title:"Pre\xe7o de venda",dataIndex:"salePrice",render:function(e){return Object(g.jsxs)("span",{children:["R$ ",e.toLocaleString("pt-BR",{minimumFractionDigits:2})]})}},{title:"A\xe7\xf5es",key:"action",render:function(e,i){return Object(g.jsxs)(D.b,{size:"middle",children:[Object(g.jsx)(S.a,{type:"primary",shape:"circle",icon:Object(g.jsx)(T.a,{}),size:"middle",onClick:function(){return e=i.id,void t(e);var e}}),Object(g.jsx)(S.a,{type:"primary",shape:"circle",icon:Object(g.jsx)(w.a,{}),size:"middle",danger:!0,onClick:function(){var e;_({title:"Tem ceteza que voc\xea quer remover o produto ".concat((e=i).title,"?"),icon:Object(g.jsx)(I.a,{}),content:"Remova s\xf3 se tiver certeza.",okText:"Sim",okType:"danger",cancelText:"N\xe3o",onOk:function(){r(e.id)},onCancel:function(){}})}})]})}}];return Object(g.jsx)(C.a,{dataSource:n,columns:a})},Y=i(416),W=i(421),X=i(411),Z=function(e){var t=e.productId,i=e.isModalVisible,n=e.setIsModalVisible,r=Object(c.useContext)($),a=r.products,o=r.addProduct,d=r.editProduct,l=Y.a.useForm(),u=Object(s.a)(l,1)[0];Object(c.useEffect)((function(){u.setFieldsValue({title:"",description:"",salePrice:0,providerPrice:0,discount:0}),u.setFieldsValue(j())}),[t]);var j=function(){var e=a.find((function(e){return e.id===t}));return e?{title:e.title,description:e.description,salePrice:e.salePrice,providerPrice:e.providerPrice,discount:e.discount}:{}};return Object(g.jsx)(N.a,{title:t?"Editar Produto":"Criar Produto",visible:i,footer:null,onCancel:function(){n(!1)},children:Object(g.jsxs)(Y.a,{form:u,name:"form-create-edit-product",layout:"vertical",onFinish:function(e){var i={title:e.title,description:e.description,salePrice:e.salePrice,providerPrice:e.providerPrice,discount:e.discount,active:!0};t?d(t,i):o(i),n(!1),u.resetFields()},initialValues:j(),validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},children:[Object(g.jsx)(Y.a.Item,{label:"T\xedtulo do produto",name:"title",rules:[{required:!0,message:"T\xedtulo \xe9 obrigat\xf3rio"},{min:5,max:30,message:"T\xedtulo deve ter entre 5 e 30 caracteres"}],children:Object(g.jsx)(W.a,{placeholder:"Nome do produto"})}),Object(g.jsx)(Y.a.Item,{label:"Descri\xe7\xe3o do produt",name:"description",rules:[{required:!0,message:"A descri\xe7\xe3o \xe9 obrigat\xf3ria"},{min:5,max:80,message:"A descri\xe7\xe3o deve ter entre 5 e 80 caracteres"}],children:Object(g.jsx)(W.a,{placeholder:"Breve descri\xe7\xe3o do produto"})}),Object(g.jsx)(X.a,{children:Object(g.jsxs)(D.b,{children:[Object(g.jsx)(Y.a.Item,{label:"Pre\xe7o de CUSTO do produto",name:"providerPrice",rules:[{required:!0,message:"O pre\xe7o \xe9 obrigat\xf3rio"}],children:Object(g.jsx)(W.a,{type:"number",addonBefore:"R$",placeholder:"Pre\xe7o de custo do produto",step:"0.01",min:0})}),Object(g.jsx)(Y.a.Item,{label:"Pre\xe7o de VENDA do produto",name:"salePrice",rules:[{required:!0,message:"O pre\xe7o de venda do produto \xe9 obrigat\xf3rio"}],children:Object(g.jsx)(W.a,{type:"number",addonBefore:"R$",placeholder:"Pre\xe7o de venda do produto",step:"0.01",min:0})})]})}),Object(g.jsx)(Y.a.Item,{children:Object(g.jsx)(S.a,{type:"primary",htmlType:"submit",children:t?"Editar":"Salvar"})})]})})},ee=i(431),te=N.a.confirm,ie=function(e){var t=Object(o.g)(),i=e.setBudgetId,n=Object(c.useContext)(H),r=n.budgets,a=n.removeBudget,s=[{title:"Cliente",render:function(e,t){return Object(g.jsx)("span",{children:t.client.name})}},{title:"email",render:function(e,t){return Object(g.jsx)("span",{children:t.client.email})}},{title:"Data cria\xe7\xe3o",render:function(e,t){return Object(g.jsx)("span",{children:new Date(t.startDate).toLocaleDateString("pt-BR")})}},{title:"Data validade",render:function(e,t){return Object(g.jsx)("span",{children:new Date(t.endDate).toLocaleDateString("pt-BR")})}},{title:"Quantidade de produtos",render:function(e,t){return Object(g.jsx)("span",{children:t.products.length})}},{title:"Total",render:function(e,t){return Object(g.jsxs)("span",{children:["R$ ",t.calculateTotal().toLocaleString("pt-BR")]})}},{title:"A\xe7\xf5es",key:"action",render:function(e,c){return Object(g.jsxs)(D.b,{size:"middle",children:[Object(g.jsx)(S.a,{type:"ghost",shape:"circle",icon:Object(g.jsx)(ee.a,{}),size:"middle",onClick:function(){return e=c.id,void t.push("".concat(m,"/budgets/pdf/").concat(e));var e}}),Object(g.jsx)(S.a,{type:"primary",shape:"circle",icon:Object(g.jsx)(T.a,{}),size:"middle",onClick:function(){return e=c.id,void i(e);var e}}),Object(g.jsx)(S.a,{type:"primary",shape:"circle",icon:Object(g.jsx)(w.a,{}),size:"middle",danger:!0,onClick:function(){return e=c,void te({title:"Tem ceteza que voc\xea quer remover esse or\xe7amento?",icon:Object(g.jsx)(I.a,{}),content:"Remova s\xf3 se tiver certeza.",okText:"Sim",okType:"danger",cancelText:"N\xe3o",onOk:function(){a(e.id)},onCancel:function(){}});var e}})]})}}];return Object(g.jsx)(C.a,{dataSource:r,columns:s})},ce=i(103),ne=i(136),re=i(420),ae=i(236),se=i.n(ae),oe=ne.a.Option,de=N.a.confirm,le=function(e){var t,i=e.budgetId,n=e.isModalVisible,r=e.setIsModalVisible,a=Object(c.useContext)($).products,o=Object(c.useContext)(H),d=o.budgets,l=o.editBudget,u=o.addBudget,j=Object(c.useContext)(Q).clients,b=Object(c.useState)({}),h=Object(s.a)(b,2),p=h[0],O=h[1],m=Object(c.useState)([]),x=Object(s.a)(m,2),f=x[0],v=x[1],y=Y.a.useForm(),P=Object(s.a)(y,1)[0];Object(c.useEffect)((function(){E();var e=d.find((function(e){return e.id===i}))||{};i&&e&&v(e.products),P.setFieldsValue(T())}),[i,n]);var T=function(){var e=d.find((function(e){return e.id===i}));return e?{id:i,clientId:e.client.id,discount:e.discount,endDate:e.endDate,startDate:e.startDate,notes:e.notes}:{id:"",clientId:"",discount:0,startDate:new Date,endDate:new Date,notes:""}},k=[{title:"Nome",dataIndex:"title"},{title:"Quantidade",dataIndex:"quantity"},{title:"Desconto",render:function(e,t){return Object(g.jsxs)("span",{children:[t.discount,"%"]})}},{title:"SubTotal",render:function(e,t){return Object(g.jsxs)("span",{children:["R$ ",t.calculateSubTotal()]})}},{title:"A\xe7\xf5es",key:"action",render:function(e,t){return Object(g.jsx)(D.b,{size:"middle",children:Object(g.jsx)(S.a,{type:"primary",shape:"circle",icon:Object(g.jsx)(w.a,{}),size:"middle",danger:!0,onClick:function(){return e=t.id,void de({title:"Tem ceteza que voc\xea quer remover esse produto?",icon:Object(g.jsx)(I.a,{}),okText:"Sim",okType:"danger",cancelText:"N\xe3o",onOk:function(){var t=f.filter((function(t){return t.id!==e}));v(t)},onCancel:function(){}});var e}})})}}],E=function(){P.resetFields(),O({}),v([])};return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(N.a,{title:i?"Editar or\xe7amento":"Criar or\xe7amento",visible:n,footer:null,onCancel:function(){E(),r(!1)},width:1e3,children:Object(g.jsxs)(Y.a,{form:P,name:"form-create-edit-budget",layout:"vertical",onFinish:function(e){var t=j.find((function(t){return t.id===e.clientId}))||{},c={discount:e.discount,endDate:e.endDate,notes:e.notes,total:e.total,client:t,startDate:new Date,products:f};i?l(i,c):u(c),E(),r(!1)},initialValues:T(),children:[Object(g.jsx)(Y.a.Item,{label:"Adicionar cliente",name:"clientId",children:Object(g.jsx)(ne.a,{showSearch:!0,placeholder:"Selecione o cliente",optionFilterProp:"children",children:j.map((function(e){return Object(g.jsxs)(oe,{value:e.id,children:[e.name," - ",e.email]},e.id)}))})}),Object(g.jsx)("label",{children:"Adicionar Produtos"}),Object(g.jsxs)(D.b,{direction:"horizontal",size:16,style:{marginBottom:16},children:[Object(g.jsx)("span",{children:"Produto: "}),Object(g.jsx)(ne.a,{showSearch:!0,style:{width:200},placeholder:"Selecione o produto",optionFilterProp:"children",value:null!==(t=null===p||void 0===p?void 0:p.id)&&void 0!==t?t:"",onChange:function(e){var t=a.find((function(t){return t.id===e}));if(t){var i=new A(t.id,t.title,t.description,t.providerPrice,t.salePrice,0,1);O(i)}},children:a.map((function(e){return Object(g.jsx)(oe,{value:e.id,children:e.title},e.id)}))}),Object(g.jsx)("span",{children:"Quantidade: "}),Object(g.jsx)(re.a,{placeholder:"Quantidade",min:1,value:p.quantity,onChange:function(e){O(Object(ce.a)(Object(ce.a)({},p),{},{quantity:e}))}}),Object(g.jsx)("span",{children:"Desconto: "}),Object(g.jsx)(re.a,{placeholder:"Desconto no produto",min:0,max:100,value:p.discount,onChange:function(e){p.applyDiscount(e),O(Object(ce.a)({},p))}}),Object(g.jsx)(S.a,{type:"primary",onClick:function(){var e=Number(null===p||void 0===p?void 0:p.quantity)||0,t=Number(null===p||void 0===p?void 0:p.discount)||0,i=[];f.forEach((function(e){i.push(new A(e.id,e.title,e.description,e.providerPrice,e.salePrice,e.discount,e.quantity))}));var c=i.findIndex((function(e){return e.id===p.id}));-1!==c?(i[c].quantity+=e,i[c].discount+=t):i.push(new A(p.id,p.title,p.description,p.providerPrice,p.salePrice,p.discount,p.quantity)),v([].concat(i)),O({})},children:"Adicionar"})]}),Object(g.jsx)(C.a,{columns:k,dataSource:f}),Object(g.jsx)(Y.a.Item,{label:"Observa\xe7\xf5es/Anota\xe7\xf5es",name:"notes",children:Object(g.jsx)(se.a,{})}),Object(g.jsx)(Y.a.Item,{children:Object(g.jsx)(S.a,{type:"primary",htmlType:"submit",children:i?"Editar":"Salvar"})})]})})})},ue=N.a.confirm,je=function(e){var t=e.setClientId,i=Object(c.useContext)(Q),n=i.clients,r=i.removeClient,a=[{title:"Cliente",render:function(e,t){return Object(g.jsx)("span",{children:t.name})}},{title:"E-mail",render:function(e,t){return Object(g.jsx)("span",{children:t.email})}},{title:"Endere\xe7o",render:function(e,t){return Object(g.jsx)("span",{children:t.address})}},{title:"Cidade",render:function(e,t){return Object(g.jsx)("span",{children:t.city})}},{title:"A\xe7\xf5es",key:"action",render:function(e,i){return Object(g.jsxs)(D.b,{size:"middle",children:[Object(g.jsx)(S.a,{type:"primary",shape:"circle",icon:Object(g.jsx)(T.a,{}),size:"middle",onClick:function(){return e=i.id,void t(e);var e}}),Object(g.jsx)(S.a,{type:"primary",shape:"circle",icon:Object(g.jsx)(w.a,{}),size:"middle",danger:!0,onClick:function(){return e=i,void ue({title:"Tem ceteza que voc\xea quer remover esse cliente?",icon:Object(g.jsx)(I.a,{}),content:"Remova s\xf3 se tiver certeza.",okText:"Sim",okType:"danger",cancelText:"N\xe3o",onOk:function(){r(e.id)},onCancel:function(){}});var e}})]})}}];return Object(g.jsx)(C.a,{dataSource:n,columns:a})},be=function(e){var t=e.clientId,i=e.isModalVisible,n=e.setIsModalVisible,r=Y.a.useForm(),a=Object(s.a)(r,1)[0],o=Object(c.useContext)(Q),d=o.clients,l=o.editClient,u=o.addClient;Object(c.useEffect)((function(){a.setFieldsValue({id:"",name:"",address:"",city:"",email:""}),a.setFieldsValue(j())}),[t]);var j=function(){var e=d.find((function(e){return e.id===t}));return e?Object(ce.a)({},e):{}};return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(N.a,{title:t?"Editar cliente":"Criar cliente",visible:i,footer:null,onCancel:function(){n(!1)},children:Object(g.jsxs)(Y.a,{form:a,name:"form-create-edit-client",layout:"vertical",onFinish:function(e){var i=Object(ce.a)({},e);t?l(t,i):u(i),n(!1),a.resetFields()},initialValues:j(),children:[Object(g.jsx)(Y.a.Item,{label:"Nome",name:"name",children:Object(g.jsx)(W.a,{})}),Object(g.jsx)(Y.a.Item,{label:"E-mail",name:"email",children:Object(g.jsx)(W.a,{})}),Object(g.jsx)(Y.a.Item,{label:"Rua..., numero",name:"address",children:Object(g.jsx)(W.a,{})}),Object(g.jsx)(Y.a.Item,{label:"Cidade",name:"city",children:Object(g.jsx)(W.a,{})}),Object(g.jsx)(Y.a.Item,{children:Object(g.jsx)(S.a,{type:"primary",htmlType:"submit",children:t?"Editar":"Salvar"})})]})})})},he=i(417),pe=i(432),Oe=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),i=t[0],n=t[1],r=Object(c.useState)(""),a=Object(s.a)(r,2),o=a[0],d=a[1],l=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n(e)},u=[{path:"".concat(m,"/"),breadcrumbName:"Home"},{path:"".concat(m,"/clients"),breadcrumbName:"Clientes"}];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(he.a,{className:"site-page-header",title:"Clientes",breadcrumb:{routes:u},subTitle:"Listagem de cliente",extra:[Object(g.jsx)(S.a,{type:"primary",shape:"round",icon:Object(g.jsx)(pe.a,{}),size:"large",onClick:function(){d(""),l(!0)},children:"Adicionar cliente"})]}),Object(g.jsx)(be,{clientId:o,isModalVisible:i,setIsModalVisible:l}),Object(g.jsx)(je,{setClientId:function(e){d(e),l(!0)}})]})},me=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),i=t[0],n=t[1],r=Object(c.useState)(""),a=Object(s.a)(r,2),o=a[0],d=a[1],l=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n(e)},u=[{path:"".concat(m,"/"),breadcrumbName:"Home"},{path:"".concat(m,"/budgets"),breadcrumbName:"Or\xe7amentos"}];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(he.a,{className:"site-page-header",title:"Or\xe7amentos",breadcrumb:{routes:u},subTitle:"Listagem de produtos",extra:[Object(g.jsx)(S.a,{type:"primary",shape:"round",icon:Object(g.jsx)(pe.a,{}),size:"large",onClick:function(){d(""),l(!0)},children:"Adicionar Or\xe7amento"})]}),Object(g.jsx)(le,{budgetId:o,isModalVisible:i,setIsModalVisible:l}),Object(g.jsx)(ie,{setBudgetId:function(e){d(e),l(!0)}})]})},xe=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),i=t[0],n=t[1],r=Object(c.useState)(""),a=Object(s.a)(r,2),o=a[0],d=a[1],l=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n(e)},u=[{path:"".concat(m,"/"),breadcrumbName:"Home"},{path:"".concat(m,"/products"),breadcrumbName:"Produtos"}];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(he.a,{className:"site-page-header",title:"Produtos",breadcrumb:{routes:u},subTitle:"Listagem de produtos",extra:[Object(g.jsx)(S.a,{type:"primary",shape:"round",icon:Object(g.jsx)(pe.a,{}),size:"large",onClick:function(){d(""),l(!0)},children:"Adicionar Produto"})]}),Object(g.jsx)(Z,{productId:o,isModalVisible:i,setIsModalVisible:l}),Object(g.jsx)(K,{setProductId:function(e){d(e),l(!0)}})]})},fe=function(){return Object(g.jsx)("div",{children:Object(g.jsx)("h1",{children:"Gerador de Or\xe7amento"})})},ve=i(98),ge=i.n(ve),ye=i(133),Pe=i(169),Ne=(i(403),i(418)),De=i(423),Se={GenerateBase64Pdf:function(){var e=Object(ye.a)(ge.a.mark((function e(t,i){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(Ne.a)(t,{paperSize:"A4",margin:{left:40,top:40,right:40,bottom:40}}).then((function(e){return Object(De.a)(e)})).then((function(e){return e.replace("data:application/pdf;base64,","")})));case 1:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),SendToAPI:function(){var e=Object(ye.a)(ge.a.mark((function e(t){var i;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:7071/api/post-budget",e.next=3,fetch("http://localhost:7071/api/post-budget",{method:"POST",body:JSON.stringify({email:t})});case 3:return i=e.sent,e.abrupt("return",i&&i.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),GenerateFilePdfDownload:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"arquivo";Object(Pe.b)(e,{paperSize:"A4",margin:40,fileName:"".concat((new Date).getFullYear(),"-").concat((new Date).getMonth(),"-").concat((new Date).getDay(),"-").concat(t,".pdf")})}},Ce=function(){var e=Object(o.h)().budgetId,t=Object(c.useContext)(H).budgets,i=Object(c.useState)({}),n=Object(s.a)(i,2),r=n[0],a=n[1];Object(c.useEffect)((function(){var i=t.find((function(t){return t.id===e}));if(i){var c=new V(i.id,i.endDate,i.client,i.products,i.notes);a(c)}}),[e]);var d=Object(c.useRef)(null),l=Object(c.useRef)(null),u=function(){var e=Object(ye.a)(ge.a.mark((function e(){var t,i,c;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.current||document.body,e.next=3,Se.GenerateBase64Pdf(t);case 3:return i=e.sent,c=new z("romulo-gouvea@hotmail.com","O assunto vindo do post",i),e.next=7,Se.SendToAPI(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"container-pdf",children:function(){var e,t,i,c,n;return Object(g.jsx)(Pe.a,{ref:l,paperSize:"auto",margin:40,fileName:"Report for ".concat((new Date).getFullYear()),author:"KendoReact Team",children:Object(g.jsx)("div",{ref:d,children:Object(g.jsxs)("div",{id:"body-pdf",children:[Object(g.jsxs)("table",{className:"t0",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsxs)("th",{className:"t0-col",children:[Object(g.jsx)("p",{className:"p0",children:"Stevanini Inc."}),Object(g.jsx)("p",{className:"p1",children:"nao-responda@stevanini.com.br"}),Object(g.jsx)("p",{className:"p1",children:"Rua Hon\xf3rio Lacerda Filho, 132"}),Object(g.jsx)("p",{className:"p1",children:"Leopoldina-MG"})]}),Object(g.jsx)("th",{className:"t0-col",children:Object(g.jsx)("p",{className:"p8",children:"OR\xc7AMENTO"})})]})}),Object(g.jsx)("tbody",{children:Object(g.jsxs)("tr",{children:[Object(g.jsxs)("td",{className:"t0-col",children:[Object(g.jsx)("p",{className:"p3 ft2 mt-30",children:"Para o cliente:"}),Object(g.jsx)("p",{className:"p1",children:null===r||void 0===r||null===(e=r.client)||void 0===e?void 0:e.name}),Object(g.jsx)("p",{className:"p1",children:null===r||void 0===r||null===(t=r.client)||void 0===t?void 0:t.email}),Object(g.jsx)("p",{className:"p1",children:null===r||void 0===r||null===(i=r.client)||void 0===i?void 0:i.address}),Object(g.jsx)("p",{className:"p1",children:null===r||void 0===r||null===(c=r.client)||void 0===c?void 0:c.city})]}),Object(g.jsx)("td",{className:"t0-br",children:Object(g.jsxs)("table",{className:"t1",children:[Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"tr1 td0",children:Object(g.jsx)("p",{className:"p9 ft6",children:"Data do Or\xe7amento"})}),Object(g.jsx)("td",{className:"tr1 td1",children:Object(g.jsx)("p",{className:"p9 ft1 p-right",children:(null===r||void 0===r?void 0:r.startDate)?new Date(r.startDate).toLocaleDateString("pt-BR"):"--"})})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"tr2 td0",children:Object(g.jsx)("p",{className:"p9 ft6",children:"V\xe1lido at\xe9"})}),Object(g.jsx)("td",{className:"tr2 td1",children:Object(g.jsx)("p",{className:"p9 ft1 p-right",children:(null===r||void 0===r?void 0:r.endDate)?new Date(r.endDate).toLocaleDateString("pt-BR"):"Sem limite de validade"})})]})]})})]})})]}),Object(g.jsxs)("table",{className:"t2",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{className:"t2-header",children:"Nome do produto"}),Object(g.jsx)("th",{className:"t2-header p-center w-100px",children:"Quantidade"}),Object(g.jsx)("th",{className:"t2-header p-center w-100px",children:"Pre\xe7o"}),Object(g.jsx)("th",{className:"t2-header p-center w-100px",children:"Total"})]})}),Object(g.jsx)("tbody",{children:null===r||void 0===r||null===(n=r.products)||void 0===n?void 0:n.map((function(e){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"t2-col",children:e.title}),Object(g.jsx)("td",{className:"t2-col p-center w-100px",children:e.quantity}),Object(g.jsxs)("td",{className:"t2-col p-center w-100px",children:["R$ ",e.salePrice||0]}),Object(g.jsxs)("td",{className:"t2-col p-center w-100px",children:["R$ ",e.total||0]})]})}))})]}),Object(g.jsx)("div",{className:"t3-container",children:Object(g.jsxs)("table",{className:"t3",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{className:"t3-header",children:Object(g.jsx)("p",{className:"p9 ft6",children:"Subtotal"})}),Object(g.jsx)("th",{className:"t3-header ",children:Object(g.jsxs)("p",{className:"p9 ft1 p-right",children:["R$ ",r.subTotal]})})]})}),Object(g.jsxs)("tbody",{children:[(null===r||void 0===r?void 0:r.discount)?Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"t3-col",children:Object(g.jsx)("p",{className:"p9 ft6",children:"Descontos(%)"})}),Object(g.jsx)("td",{className:"t3-col",children:Object(g.jsxs)("p",{className:"p9 ft1 p-right",children:[null===r||void 0===r?void 0:r.discount," %"]})})]}):Object(g.jsx)("tr",{}),Object(g.jsxs)("tr",{className:"t3-footer",children:[Object(g.jsx)("td",{className:"t3-col",children:Object(g.jsx)("p",{className:"p9 ft6",children:"TOTAL"})}),Object(g.jsx)("td",{className:"t3-col",children:Object(g.jsxs)("p",{className:"p9 ft1 p-right",children:["RS ",r.total]})})]})]})]})}),Object(g.jsx)("p",{className:"p3 ft2 pdt-30",children:"Observa\xe7\xf5es:"}),Object(g.jsx)("p",{className:"p1 pdb-30",children:null===r||void 0===r?void 0:r.notes})]})})})}()}),Object(g.jsxs)(D.b,{style:{width:"100%"},children:[Object(g.jsx)(S.a,{type:"primary",onClick:function(){var e=d.current||document.body;Se.GenerateFilePdfDownload(e,(null===r||void 0===r?void 0:r.client.email)+".pdf")},children:"Baixar arquivo em PDF"}),Object(g.jsx)(S.a,{onClick:u,children:"Enviar por email"})]})]})},Ie=function(){return Object(g.jsxs)(o.d,{children:[Object(g.jsx)(o.b,{path:"".concat(m,"/"),exact:!0,component:fe}),Object(g.jsx)(o.b,{path:"".concat(m,"/products"),exact:!0,component:xe}),Object(g.jsx)(o.b,{path:"".concat(m,"/budgets"),exact:!0,component:me}),Object(g.jsx)(o.b,{path:"".concat(m,"/budgets/pdf/:budgetId"),component:Ce}),Object(g.jsx)(o.b,{path:"".concat(m,"/clients"),exact:!0,component:Oe}),Object(g.jsx)(o.a,{from:"*",to:"".concat(m,"/")})]})},Te=(i(404),i(433)),we=i(434),ke=u.a.Header,Ee=u.a.Content;var qe=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),i=t[0],r=t[1];return Object(g.jsx)(o.c,{history:l,children:Object(g.jsx)(U,{children:Object(g.jsx)(J,{children:Object(g.jsx)(L,{children:Object(g.jsxs)(u.a,{children:[Object(g.jsx)(P,{collapse:i}),Object(g.jsxs)(u.a,{style:{minHeight:"100vh"},children:[Object(g.jsx)(ke,{style:{padding:0,background:"#fff"},children:n.a.createElement(i?Te.a:we.a,{className:"trigger",onClick:function(){r(!i)}})}),Object(g.jsx)(Ee,{style:{margin:"24px 16px",padding:24,minHeight:280,background:"#fff"},children:Object(g.jsx)(Ie,{})})]})]})})})})})};i(405);a.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(qe,{})}),document.getElementById("root"))}},[[406,1,2]]]);
//# sourceMappingURL=main.af8f7990.chunk.js.map