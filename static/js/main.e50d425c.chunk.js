(this["webpackJsonpreact-orcamento"]=this["webpackJsonpreact-orcamento"]||[]).push([[0],{255:function(e,t,n){},406:function(e,t,n){},407:function(e,t,n){},409:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),a=n(28),r=n.n(a),s=n(26),o=n(33),d=n(51),l=Object(d.a)(),u=n(413),j=n(74),b=n(429),O=n(430),h=n(431),p=n(71),m=(n(255),"/react-orcamento"),x=n(3),f=u.a.Sider,v=function(e){return Object(x.jsxs)(f,{trigger:null,collapsible:!0,collapsed:e.collapse,children:[Object(x.jsx)(p.a,{to:"".concat(m,"/"),children:Object(x.jsx)("h4",{className:e.collapse?"logo-collapse":"logo",children:"Gerenciador de Or\xe7amento"})}),Object(x.jsxs)(j.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"],children:[Object(x.jsx)(j.a.Item,{icon:Object(x.jsx)(b.a,{}),children:Object(x.jsx)(p.a,{to:"".concat(m,"/"),children:"Home"})},"1"),Object(x.jsx)(j.a.Item,{icon:Object(x.jsx)(O.a,{}),children:Object(x.jsx)(p.a,{to:"".concat(m,"/clients"),children:"Clientes"})},"2"),Object(x.jsx)(j.a.Item,{icon:Object(x.jsx)(h.a,{}),children:Object(x.jsx)(p.a,{to:"".concat(m,"/products"),children:"Produtos"})},"3"),Object(x.jsx)(j.a.Item,{icon:Object(x.jsx)(O.a,{}),children:Object(x.jsx)(p.a,{to:"".concat(m,"/budgets"),children:"Or\xe7amentos"})},"4")]})]})},g=n(425),y=n(428),N=n(49),S=n(418),P=n(139),D=n(432),C=n(433),I=n(67),T=n(133),k=n(42),w=n(113),F=function(){function e(t,n,c,i,a,r,s){Object(k.a)(this,e),this.id=t,this.title=n,this.description=c,this.providerPrice=i,this.salePrice=a,this.discount=r,this.active=s}return Object(w.a)(e,[{key:"toDTO",value:function(){return{title:this.title,description:this.description,providerPrice:this.providerPrice,salePrice:this.salePrice,discount:this.discount,active:this.active}}}]),e}(),R=function e(t,n,c){Object(k.a)(this,e),this.to=t,this.subject=n,this.fileBase64=c},z=function e(t,n,c,i,a){Object(k.a)(this,e),this.id=t,this.name=n,this.address=c,this.city=i,this.email=a},B=function(){function e(t,n,c,i,a,r,s,o){Object(k.a)(this,e),this.id=t,this.startDate=n,this.endDate=c,this.client=i,this.products=a,this.notes=r,this.discount=s,this.total=o}return Object(w.a)(e,[{key:"calculateSubTotal",value:function(){var e=0;this.products.forEach((function(t){e+=t.salePrice*t.quantity})),this.total=e}},{key:"applyDiscount",value:function(e){this.discount=e,this.total=this.total*(1-e/100)}},{key:"calculateTotal",value:function(){this.calculateSubTotal(),this.applyDiscount(this.discount)}}]),e}(),E=(n(247),n(244),"PRODUCT_STORE"),q=function(){var e=localStorage.getItem(E)||"";try{return JSON.parse(e)}catch(t){return[]}},V=Object(c.createContext)({products:[],addProduct:function(){return null},removeProduct:function(){return null},editProduct:function(){return null}}),A=function(e){var t=Object(c.useState)(q),n=Object(s.a)(t,2),i=n[0],a=n[1];Object(c.useEffect)((function(){!function(e){(null===e||void 0===e?void 0:e.length)>0&&localStorage.setItem(E,JSON.stringify(e))}(i)}),[i]);var r={products:i,addProduct:function(e){var t=new F(T.Guid.newGuid().toString(),e.title,e.description,e.providerPrice,e.salePrice,e.discount,!0);a([].concat(Object(I.a)(i),[t]))},removeProduct:function(e){var t=i.filter((function(t){return t.id!==e}));a(t)},editProduct:function(e,t){var n=i.findIndex((function(t){return t.id===e}));-1!==n&&(i[n].active=t.active,i[n].title=t.title,i[n].description=t.description,i[n].discount=t.discount,i[n].salePrice=t.salePrice,i[n].providerPrice=t.providerPrice,a(Object(I.a)(i)))}};return Object(x.jsx)(V.Provider,{value:r,children:e.children})},M=n(158),G="BUDGET_STORE",L=function(){var e=localStorage.getItem(G)||"";try{var t,n=JSON.parse(e),c=[],i=Object(M.a)(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;c.push(new B(a.id,a.startDate,a.endDate,a.client,a.products,a.notes,a.discount,a.total))}}catch(r){i.e(r)}finally{i.f()}return c}catch(s){return[]}},$="CLIENT_STORE",H=function(){var e=localStorage.getItem($)||"";try{var t,n=JSON.parse(e),c=[],i=Object(M.a)(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;c.push(new z(a.id,a.name,a.address,a.city,a.email))}}catch(r){i.e(r)}finally{i.f()}return c}catch(s){return[]}},J=Object(c.createContext)({budgets:[],addBudget:function(){return null},removeBudget:function(){return null},editBudget:function(){return null},clients:[],addClient:function(){return null},removeClient:function(){return null},editClient:function(){return null}}),Q=function(e){var t=Object(c.useState)(L),n=Object(s.a)(t,2),i=n[0],a=n[1],r=Object(c.useState)(H),o=Object(s.a)(r,2),d=o[0],l=o[1];Object(c.useEffect)((function(){l(d)}),[d]),Object(c.useEffect)((function(){!function(e){(null===e||void 0===e?void 0:e.length)>0&&localStorage.setItem(G,JSON.stringify(e))}(i)}),[i]);var u={budgets:i,addBudget:function(e){var t=new B(T.Guid.newGuid().toString(),e.startDate,e.endDate,e.client,e.products,e.notes,e.discount,e.total);a([].concat(Object(I.a)(i),[t]))},removeBudget:function(e){var t=i.filter((function(t){return t.id!==e}));a(t)},editBudget:function(e,t){var n=i.findIndex((function(t){return t.id===e}));-1!==n&&(i[n].startDate=t.startDate,i[n].endDate=t.endDate,i[n].client=t.client,i[n].discount=t.discount,i[n].notes=t.notes,i[n].products=t.products,i[n].total=t.total,a(Object(I.a)(i)))},clients:d,addClient:function(e){var t=new z(T.Guid.newGuid().toString(),e.name,e.address,e.city,e.email);l([].concat(Object(I.a)(d),[t]))},removeClient:function(e){var t=d.filter((function(t){return t.id!==e}));l(t)},editClient:function(e,t){var n=d.findIndex((function(t){return t.id===e}));-1!==n&&(d[n].name=t.name,d[n].address=t.address,d[n].city=t.city,d[n].email=t.email,l(Object(I.a)(d)))}};return Object(x.jsx)(J.Provider,{value:u,children:e.children})},U=g.a.confirm,_=function(e){var t=e.setProductId,n=Object(c.useContext)(V),i=n.products,a=n.removeProduct,r=[{title:"Nome",dataIndex:"title"},{title:"Descri\xe7\xe3o",dataIndex:"description"},{title:"Pre\xe7o de venda",dataIndex:"salePrice",render:function(e){return Object(x.jsxs)("span",{children:["R$ ",e.toLocaleString("pt-BR",{minimumFractionDigits:2})]})}},{title:"A\xe7\xf5es",key:"action",render:function(e,n){return Object(x.jsxs)(y.b,{size:"middle",children:[Object(x.jsx)(N.a,{type:"primary",shape:"circle",icon:Object(x.jsx)(D.a,{}),size:"middle",onClick:function(){return e=n.id,void t(e);var e}}),Object(x.jsx)(N.a,{type:"primary",shape:"circle",icon:Object(x.jsx)(C.a,{}),size:"middle",danger:!0,onClick:function(){var e;U({title:"Tem ceteza que voc\xea quer remover o produto ".concat((e=n).title,"?"),icon:Object(x.jsx)(P.a,{}),content:"Remova s\xf3 se tiver certeza.",okText:"Sim",okType:"danger",cancelText:"N\xe3o",onOk:function(){a(e.id)},onCancel:function(){}})}})]})}}];return Object(x.jsx)(S.a,{dataSource:i,columns:r})},K=n(419),Y=n(424),W=n(414),X=function(e){var t=e.productId,n=e.isModalVisible,i=e.setIsModalVisible,a=Object(c.useContext)(V),r=a.products,o=a.addProduct,d=a.editProduct,l=K.a.useForm(),u=Object(s.a)(l,1)[0];Object(c.useEffect)((function(){u.setFieldsValue({title:"",description:"",salePrice:0,providerPrice:0,discount:0}),u.setFieldsValue(j())}),[t]);var j=function(){var e=r.find((function(e){return e.id===t}));return e?{title:e.title,description:e.description,salePrice:e.salePrice,providerPrice:e.providerPrice,discount:e.discount}:{}};return Object(x.jsx)(g.a,{title:t?"Editar Produto":"Criar Produto",visible:n,footer:null,onCancel:function(){i(!1)},children:Object(x.jsxs)(K.a,{form:u,name:"form-create-edit-product",layout:"vertical",onFinish:function(e){var n={title:e.title,description:e.description,salePrice:e.salePrice,providerPrice:e.providerPrice,discount:e.discount,active:!0};t?d(t,n):o(n),i(!1),u.resetFields()},initialValues:j(),validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},children:[Object(x.jsx)(K.a.Item,{label:"T\xedtulo do produto",name:"title",rules:[{required:!0,message:"T\xedtulo \xe9 obrigat\xf3rio"},{min:5,max:30,message:"T\xedtulo deve ter entre 5 e 30 caracteres"}],children:Object(x.jsx)(Y.a,{placeholder:"Nome do produto"})}),Object(x.jsx)(K.a.Item,{label:"Descri\xe7\xe3o do produt",name:"description",rules:[{required:!0,message:"A descri\xe7\xe3o \xe9 obrigat\xf3ria"},{min:5,max:80,message:"A descri\xe7\xe3o deve ter entre 5 e 80 caracteres"}],children:Object(x.jsx)(Y.a,{placeholder:"Breve descri\xe7\xe3o do produto"})}),Object(x.jsx)(W.a,{children:Object(x.jsxs)(y.b,{children:[Object(x.jsx)(K.a.Item,{label:"Pre\xe7o de CUSTO do produto",name:"providerPrice",rules:[{required:!0,message:"O pre\xe7o \xe9 obrigat\xf3rio"}],children:Object(x.jsx)(Y.a,{type:"number",addonBefore:"R$",placeholder:"Pre\xe7o de custo do produto",step:"0.01",min:0})}),Object(x.jsx)(K.a.Item,{label:"Pre\xe7o de VENDA do produto",name:"salePrice",rules:[{required:!0,message:"O pre\xe7o de venda do produto \xe9 obrigat\xf3rio"}],children:Object(x.jsx)(Y.a,{type:"number",addonBefore:"R$",placeholder:"Pre\xe7o de venda do produto",step:"0.01",min:0})})]})}),Object(x.jsx)(K.a.Item,{children:Object(x.jsx)(N.a,{type:"primary",htmlType:"submit",children:t?"Editar":"Salvar"})})]})})},Z=n(434),ee=g.a.confirm,te=function(e){var t=Object(o.g)(),n=e.setBudgetId,i=Object(c.useContext)(J),a=i.budgets,r=i.removeBudget,s=[{title:"Cliente",render:function(e,t){return Object(x.jsx)("span",{children:t.client.name})}},{title:"email",render:function(e,t){return Object(x.jsx)("span",{children:t.client.email})}},{title:"Data cria\xe7\xe3o",render:function(e,t){return Object(x.jsx)("span",{children:new Date(t.startDate).toLocaleDateString("pt-BR")})}},{title:"Data validade",render:function(e,t){return Object(x.jsx)("span",{children:new Date(t.endDate).toLocaleDateString("pt-BR")})}},{title:"Quantidade de produtos",render:function(e,t){return Object(x.jsx)("span",{children:t.products.length})}},{title:"Total",render:function(e,t){return Object(x.jsxs)("span",{children:["R$ ",t.total&&t.total.toLocaleString("pt-BR")]})}},{title:"A\xe7\xf5es",key:"action",render:function(e,c){return Object(x.jsxs)(y.b,{size:"middle",children:[Object(x.jsx)(N.a,{type:"ghost",shape:"circle",icon:Object(x.jsx)(Z.a,{}),size:"middle",onClick:function(){return e=c.id,void t.push("".concat(m,"/budgets/pdf/").concat(e));var e}}),Object(x.jsx)(N.a,{type:"primary",shape:"circle",icon:Object(x.jsx)(D.a,{}),size:"middle",onClick:function(){return e=c.id,void n(e);var e}}),Object(x.jsx)(N.a,{type:"primary",shape:"circle",icon:Object(x.jsx)(C.a,{}),size:"middle",danger:!0,onClick:function(){return e=c,void ee({title:"Tem ceteza que voc\xea quer remover esse or\xe7amento?",icon:Object(x.jsx)(P.a,{}),content:"Remova s\xf3 se tiver certeza.",okText:"Sim",okType:"danger",cancelText:"N\xe3o",onOk:function(){r(e.id)},onCancel:function(){}});var e}})]})}}];return Object(x.jsx)(S.a,{dataSource:a,columns:s})},ne=n(99),ce=n(137),ie=n(423),ae=n(237),re=n.n(ae),se=ce.a.Option,oe=g.a.confirm,de=function(e){var t,n=e.budgetId,i=e.isModalVisible,a=e.setIsModalVisible,r=Object(c.useContext)(V).products,o=Object(c.useContext)(J),d=o.budgets,l=o.editBudget,u=o.addBudget,j=Object(c.useContext)(J).clients,b=Object(c.useState)({}),O=Object(s.a)(b,2),h=O[0],p=O[1],m=Object(c.useState)([]),f=Object(s.a)(m,2),v=f[0],D=f[1],T=K.a.useForm(),k=Object(s.a)(T,1)[0];Object(c.useEffect)((function(){R(),k.setFieldsValue({id:"",client:{},discount:0,endDate:new Date,startDate:new Date,notes:"",products:[],total:0});var e=d.find((function(e){return e.id===n}))||{};n&&e&&D(e.products),k.setFieldsValue(w())}),[n,i]);var w=function(){var e=d.find((function(e){return e.id===n}));return e?{id:n,clientId:e.client.id,discount:e.discount,endDate:e.endDate,startDate:e.startDate,notes:e.notes}:{}},F=[{title:"Nome",dataIndex:"title"},{title:"Quantidade",dataIndex:"quantity"},{title:"Desconto",dataIndex:"discount"},{title:"A\xe7\xf5es",key:"action",render:function(e,t){return Object(x.jsx)(y.b,{size:"middle",children:Object(x.jsx)(N.a,{type:"primary",shape:"circle",icon:Object(x.jsx)(C.a,{}),size:"middle",danger:!0,onClick:function(){return e=t.id,void oe({title:"Tem ceteza que voc\xea quer remover esse produto?",icon:Object(x.jsx)(P.a,{}),okText:"Sim",okType:"danger",cancelText:"N\xe3o",onOk:function(){var t=v.filter((function(t){return t.id!==e}));D(t)},onCancel:function(){}});var e}})})}}],R=function(){k.resetFields(),p({}),D([])};return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(g.a,{title:n?"Editar or\xe7amento":"Criar or\xe7amento",visible:i,footer:null,onCancel:function(){R(),a(!1)},width:1e3,children:Object(x.jsxs)(K.a,{form:k,name:"form-create-edit-budget",layout:"vertical",onFinish:function(e){var t=j.find((function(t){return t.id===e.clientId}))||{},c={discount:e.discount,endDate:e.endDate,notes:e.notes,total:e.total,client:t,startDate:new Date,products:v};n?l(n,c):u(c),R(),a(!1)},initialValues:w(),children:[Object(x.jsx)(K.a.Item,{label:"Adicionar cliente",name:"clientId",children:Object(x.jsx)(ce.a,{showSearch:!0,placeholder:"Selecione o cliente",optionFilterProp:"children",children:j.map((function(e){return Object(x.jsxs)(se,{value:e.id,children:[e.name," - ",e.email]},e.id)}))})}),Object(x.jsx)("label",{children:"Adicionar Produtos"}),Object(x.jsxs)(y.b,{direction:"horizontal",size:16,style:{marginBottom:16},children:[Object(x.jsx)("span",{children:"Produto: "}),Object(x.jsx)(ce.a,{showSearch:!0,style:{width:200},placeholder:"Selecione o produto",optionFilterProp:"children",value:null!==(t=null===h||void 0===h?void 0:h.id)&&void 0!==t?t:"",onChange:function(e){var t=r.find((function(t){return t.id===e}));if(t){var n={id:t.id,title:t.title,description:t.description,quantity:1,discount:0};p(n)}},children:r.map((function(e){return Object(x.jsx)(se,{value:e.id,children:e.title},e.id)}))}),Object(x.jsx)("span",{children:"Quantidade: "}),Object(x.jsx)(ie.a,{placeholder:"Quantidade",min:1,value:h.quantity,onChange:function(e){p(Object(ne.a)(Object(ne.a)({},h),{},{quantity:e}))}}),Object(x.jsx)("span",{children:"Desconto: "}),Object(x.jsx)(ie.a,{placeholder:"Desconto no produto",min:0,max:100,value:h.discount,onChange:function(e){p(Object(ne.a)(Object(ne.a)({},h),{},{discount:e}))}}),Object(x.jsx)(N.a,{type:"primary",onClick:function(){var e=Number(null===h||void 0===h?void 0:h.quantity)||0,t=Number(null===h||void 0===h?void 0:h.discount)||0,n=v.findIndex((function(e){return e.id===h.id}));-1!==n?(v[n].quantity+=e,v[n].discount+=t,D(Object(I.a)(v))):D([].concat(Object(I.a)(v),[h])),p({})},children:"Adicionar"})]}),Object(x.jsx)(S.a,{columns:F,dataSource:v}),Object(x.jsx)(K.a.Item,{label:"Observa\xe7\xf5es/Anota\xe7\xf5es",name:"notes",children:Object(x.jsx)(re.a,{})}),Object(x.jsx)(K.a.Item,{children:Object(x.jsx)(N.a,{type:"primary",htmlType:"submit",children:n?"Editar":"Salvar"})})]})})})},le=g.a.confirm,ue=function(e){var t=e.setClientId,n=Object(c.useContext)(J),i=n.clients,a=n.removeClient,r=[{title:"Cliente",render:function(e,t){return Object(x.jsx)("span",{children:t.name})}},{title:"E-mail",render:function(e,t){return Object(x.jsx)("span",{children:t.email})}},{title:"Endere\xe7o",render:function(e,t){return Object(x.jsx)("span",{children:t.address})}},{title:"Cidade",render:function(e,t){return Object(x.jsx)("span",{children:t.city})}},{title:"A\xe7\xf5es",key:"action",render:function(e,n){return Object(x.jsxs)(y.b,{size:"middle",children:[Object(x.jsx)(N.a,{type:"primary",shape:"circle",icon:Object(x.jsx)(D.a,{}),size:"middle",onClick:function(){return e=n.id,void t(e);var e}}),Object(x.jsx)(N.a,{type:"primary",shape:"circle",icon:Object(x.jsx)(C.a,{}),size:"middle",danger:!0,onClick:function(){return e=n,void le({title:"Tem ceteza que voc\xea quer remover esse cliente?",icon:Object(x.jsx)(P.a,{}),content:"Remova s\xf3 se tiver certeza.",okText:"Sim",okType:"danger",cancelText:"N\xe3o",onOk:function(){a(e.id)},onCancel:function(){}});var e}})]})}}];return Object(x.jsx)(S.a,{dataSource:i,columns:r})},je=function(e){var t=e.clientId,n=e.isModalVisible,i=e.setIsModalVisible,a=K.a.useForm(),r=Object(s.a)(a,1)[0],o=Object(c.useContext)(J),d=o.clients,l=o.editClient,u=o.addClient;Object(c.useEffect)((function(){r.setFieldsValue({id:"",name:"",address:"",city:"",email:""}),r.setFieldsValue(j())}),[t]);var j=function(){var e=d.find((function(e){return e.id===t}));return e?Object(ne.a)({},e):{}};return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(g.a,{title:t?"Editar cliente":"Criar cliente",visible:n,footer:null,onCancel:function(){i(!1)},children:Object(x.jsxs)(K.a,{form:r,name:"form-create-edit-client",layout:"vertical",onFinish:function(e){var n=Object(ne.a)({},e);t?l(t,n):u(n),i(!1),r.resetFields()},initialValues:j(),children:[Object(x.jsx)(K.a.Item,{label:"Nome",name:"name",children:Object(x.jsx)(Y.a,{})}),Object(x.jsx)(K.a.Item,{label:"E-mail",name:"email",children:Object(x.jsx)(Y.a,{})}),Object(x.jsx)(K.a.Item,{label:"Rua..., numero",name:"address",children:Object(x.jsx)(Y.a,{})}),Object(x.jsx)(K.a.Item,{label:"Cidade",name:"city",children:Object(x.jsx)(Y.a,{})}),Object(x.jsx)(K.a.Item,{children:Object(x.jsx)(N.a,{type:"primary",htmlType:"submit",children:t?"Editar":"Salvar"})})]})})})},be=n(420),Oe=n(435),he=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)(""),r=Object(s.a)(a,2),o=r[0],d=r[1],l=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(e)},u=[{path:"".concat(m,"/"),breadcrumbName:"Home"},{path:"".concat(m,"/clients"),breadcrumbName:"Clientes"}];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(be.a,{className:"site-page-header",title:"Clientes",breadcrumb:{routes:u},subTitle:"Listagem de cliente",extra:[Object(x.jsx)(N.a,{type:"primary",shape:"round",icon:Object(x.jsx)(Oe.a,{}),size:"large",onClick:function(){d(""),l(!0)},children:"Adicionar cliente"})]}),Object(x.jsx)(je,{clientId:o,isModalVisible:n,setIsModalVisible:l}),Object(x.jsx)(ue,{setClientId:function(e){d(e),l(!0)}})]})},pe=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)(""),r=Object(s.a)(a,2),o=r[0],d=r[1],l=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(e)},u=[{path:"".concat(m,"/"),breadcrumbName:"Home"},{path:"".concat(m,"/budgets"),breadcrumbName:"Or\xe7amentos"}];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(be.a,{className:"site-page-header",title:"Or\xe7amentos",breadcrumb:{routes:u},subTitle:"Listagem de produtos",extra:[Object(x.jsx)(N.a,{type:"primary",shape:"round",icon:Object(x.jsx)(Oe.a,{}),size:"large",onClick:function(){d(""),l(!0)},children:"Adicionar Or\xe7amento"})]}),Object(x.jsx)(de,{budgetId:o,isModalVisible:n,setIsModalVisible:l}),Object(x.jsx)(te,{setBudgetId:function(e){d(e),l(!0)}})]})},me=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)(""),r=Object(s.a)(a,2),o=r[0],d=r[1],l=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(e)},u=[{path:"".concat(m,"/"),breadcrumbName:"Home"},{path:"".concat(m,"/products"),breadcrumbName:"Produtos"}];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(be.a,{className:"site-page-header",title:"Produtos",breadcrumb:{routes:u},subTitle:"Listagem de produtos",extra:[Object(x.jsx)(N.a,{type:"primary",shape:"round",icon:Object(x.jsx)(Oe.a,{}),size:"large",onClick:function(){d(""),l(!0)},children:"Adicionar Produto"})]}),Object(x.jsx)(X,{productId:o,isModalVisible:n,setIsModalVisible:l}),Object(x.jsx)(_,{setProductId:function(e){d(e),l(!0)}})]})},xe=function(){return Object(x.jsx)("div",{children:Object(x.jsx)("h1",{children:"Gerador de Or\xe7amento"})})},fe=n(98),ve=n.n(fe),ge=n(134),ye=n(170),Ne=(n(406),n(421)),Se=n(426),Pe={GenerateBase64Pdf:function(){var e=Object(ge.a)(ve.a.mark((function e(t,n){return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(Ne.a)(t,{paperSize:"A4",margin:{left:40,top:40,right:40,bottom:40}}).then((function(e){return Object(Se.a)(e)})).then((function(e){return e.replace("data:application/pdf;base64,","")})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),SendToAPI:function(){var e=Object(ge.a)(ve.a.mark((function e(t){var n;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:7071/api/post-budget",e.next=3,fetch("http://localhost:7071/api/post-budget",{method:"POST",body:JSON.stringify({email:t})});case 3:return n=e.sent,e.abrupt("return",n&&n.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),GenerateFilePdfDownload:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"arquivo";Object(ye.b)(e,{paperSize:"A4",margin:40,fileName:"".concat((new Date).getFullYear(),"-").concat((new Date).getMonth(),"-").concat((new Date).getDay(),"-").concat(t,".pdf")})}},De=function(){var e=Object(o.h)().budgetId,t=Object(c.useContext)(J).budgets,n=Object(c.useState)({}),i=Object(s.a)(n,2),a=i[0],r=i[1];Object(c.useEffect)((function(){var n=t.find((function(t){return t.id===e}));n&&r(new B(n.id,n.startDate,n.endDate,n.client,n.products,n.notes,n.discount,n.total))}),[e]);var d=Object(c.useRef)(null),l=Object(c.useRef)(null),u=function(){var e=Object(ge.a)(ve.a.mark((function e(){var t,n,c;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.current||document.body,e.next=3,Pe.GenerateBase64Pdf(t);case 3:return n=e.sent,c=new R("romulo-gouvea@hotmail.com","O assunto vindo do post",n),e.next=7,Pe.SendToAPI(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"container-pdf",children:function(){var e,t,n,c,i;return Object(x.jsx)(ye.a,{ref:l,paperSize:"auto",margin:40,fileName:"Report for ".concat((new Date).getFullYear()),author:"KendoReact Team",children:Object(x.jsx)("div",{ref:d,children:Object(x.jsxs)("div",{id:"body-pdf",children:[Object(x.jsxs)("table",{className:"t0",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsxs)("th",{className:"t0-col",children:[Object(x.jsx)("p",{className:"p0",children:"Stevanini Inc."}),Object(x.jsx)("p",{className:"p1",children:"nao-responda@stevanini.com.br"}),Object(x.jsx)("p",{className:"p1",children:"Rua Hon\xf3rio Lacerda Filho, 132"}),Object(x.jsx)("p",{className:"p1",children:"Leopoldina-MG"})]}),Object(x.jsx)("th",{className:"t0-col",children:Object(x.jsx)("p",{className:"p8",children:"OR\xc7AMENTO"})})]})}),Object(x.jsx)("tbody",{children:Object(x.jsxs)("tr",{children:[Object(x.jsxs)("td",{className:"t0-col",children:[Object(x.jsx)("p",{className:"p3 ft2 mt-30",children:"Para o cliente:"}),Object(x.jsx)("p",{className:"p1",children:null===a||void 0===a||null===(e=a.client)||void 0===e?void 0:e.name}),Object(x.jsx)("p",{className:"p1",children:null===a||void 0===a||null===(t=a.client)||void 0===t?void 0:t.email}),Object(x.jsx)("p",{className:"p1",children:null===a||void 0===a||null===(n=a.client)||void 0===n?void 0:n.address}),Object(x.jsx)("p",{className:"p1",children:null===a||void 0===a||null===(c=a.client)||void 0===c?void 0:c.city})]}),Object(x.jsx)("td",{className:"t0-br",children:Object(x.jsxs)("table",{className:"t1",children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{className:"tr1 td0",children:Object(x.jsx)("p",{className:"p9 ft6",children:"Data do Or\xe7amento"})}),Object(x.jsx)("td",{className:"tr1 td1",children:Object(x.jsx)("p",{className:"p9 ft1 p-right",children:(null===a||void 0===a?void 0:a.startDate)?new Date(a.startDate).toLocaleDateString("pt-BR"):"--"})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{className:"tr2 td0",children:Object(x.jsx)("p",{className:"p9 ft6",children:"V\xe1lido at\xe9"})}),Object(x.jsx)("td",{className:"tr2 td1",children:Object(x.jsx)("p",{className:"p9 ft1 p-right",children:(null===a||void 0===a?void 0:a.endDate)?new Date(a.endDate).toLocaleDateString("pt-BR"):"Sem limite de validade"})})]})]})})]})})]}),Object(x.jsxs)("table",{className:"t2",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{className:"t2-header",children:"Nome do produto"}),Object(x.jsx)("th",{className:"t2-header p-center w-100px",children:"Quantidade"}),Object(x.jsx)("th",{className:"t2-header p-center w-100px",children:"Pre\xe7o"}),Object(x.jsx)("th",{className:"t2-header p-center w-100px",children:"Total"})]})}),Object(x.jsx)("tbody",{children:null===a||void 0===a||null===(i=a.products)||void 0===i?void 0:i.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{className:"t2-col",children:e.title}),Object(x.jsx)("td",{className:"t2-col p-center w-100px",children:e.quantity}),Object(x.jsxs)("td",{className:"t2-col p-center w-100px",children:["R$ ",e.salePrice||0]}),Object(x.jsxs)("td",{className:"t2-col p-center w-100px",children:["R$ ",0]})]})}))})]}),Object(x.jsx)("div",{className:"t3-container",children:Object(x.jsxs)("table",{className:"t3",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{className:"t3-header",children:Object(x.jsx)("p",{className:"p9 ft6",children:"Subtotal"})}),Object(x.jsx)("th",{className:"t3-header ",children:Object(x.jsxs)("p",{className:"p9 ft1 p-right",children:["R$ ",0]})})]})}),Object(x.jsxs)("tbody",{children:[(null===a||void 0===a?void 0:a.discount)&&Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{className:"t3-col",children:Object(x.jsx)("p",{className:"p9 ft6",children:"Descontos(%)"})}),Object(x.jsx)("td",{className:"t3-col",children:Object(x.jsxs)("p",{className:"p9 ft1 p-right",children:[null===a||void 0===a?void 0:a.discount," %"]})})]}),Object(x.jsxs)("tr",{className:"t3-footer",children:[Object(x.jsx)("td",{className:"t3-col",children:Object(x.jsx)("p",{className:"p9 ft6",children:"TOTAL"})}),Object(x.jsx)("td",{className:"t3-col",children:Object(x.jsxs)("p",{className:"p9 ft1 p-right",children:["RS ",0]})})]})]})]})}),Object(x.jsx)("p",{className:"p3 ft2 pdt-30",children:"Observa\xe7\xf5es:"}),Object(x.jsx)("p",{className:"p1 pdb-30",children:null===a||void 0===a?void 0:a.notes})]})})})}()}),Object(x.jsxs)(y.b,{style:{width:"100%"},children:[Object(x.jsx)(N.a,{type:"primary",onClick:function(){var e=d.current||document.body;Pe.GenerateFilePdfDownload(e,(null===a||void 0===a?void 0:a.client.email)+".pdf")},children:"Baixar arquivo em PDF"}),Object(x.jsx)(N.a,{onClick:u,children:"Enviar por email"})]})]})},Ce=function(){return Object(x.jsxs)(o.d,{children:[Object(x.jsx)(o.b,{path:"".concat(m,"/"),exact:!0,component:xe}),Object(x.jsx)(o.b,{path:"".concat(m,"/products"),exact:!0,component:me}),Object(x.jsx)(o.b,{path:"".concat(m,"/budgets"),exact:!0,component:pe}),Object(x.jsx)(o.b,{path:"".concat(m,"/budgets/pdf/:budgetId"),component:De}),Object(x.jsx)(o.b,{path:"".concat(m,"/clients"),exact:!0,component:he}),Object(x.jsx)(o.a,{from:"*",to:"".concat(m,"/")})]})},Ie=(n(407),n(436)),Te=n(437),ke=u.a.Header,we=u.a.Content;var Fe=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(x.jsx)(o.c,{history:l,children:Object(x.jsx)(Q,{children:Object(x.jsx)(A,{children:Object(x.jsxs)(u.a,{children:[Object(x.jsx)(v,{collapse:n}),Object(x.jsxs)(u.a,{style:{minHeight:"100vh"},children:[Object(x.jsx)(ke,{style:{padding:0,background:"#fff"},children:i.a.createElement(n?Ie.a:Te.a,{className:"trigger",onClick:function(){a(!n)}})}),Object(x.jsx)(we,{style:{margin:"24px 16px",padding:24,minHeight:280,background:"#fff"},children:Object(x.jsx)(Ce,{})})]})]})})})})};n(408);r.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(Fe,{})}),document.getElementById("root"))}},[[409,1,2]]]);
//# sourceMappingURL=main.e50d425c.chunk.js.map