(this["webpackJsonpreact-orcamento"]=this["webpackJsonpreact-orcamento"]||[]).push([[0],{252:function(e,t,i){},403:function(e,t,i){},404:function(e,t,i){},406:function(e,t,i){"use strict";i.r(t);var n=i(0),c=i.n(n),r=i(28),a=i.n(r),s=i(25),o=i(33),d=i(51),l=Object(d.a)(),u=i(410),j=i(73),b=i(426),h=i(427),p=i(428),O=i(70),m=(i(252),"/react-orcamento"),f="PRODUCT_STORE",x="BUDGET_STORE",v="CLIENT_STORE",y=i(3),g=u.a.Sider,P=function(e){return Object(y.jsxs)(g,{breakpoint:"md",collapsedWidth:"0",trigger:null,collapsible:!0,collapsed:e.collapse,children:[Object(y.jsx)(O.a,{to:"".concat(m,"/"),children:Object(y.jsx)("h4",{className:e.collapse?"logo-collapse":"logo",children:"Gerenciador de Or\xe7amento"})}),Object(y.jsxs)(j.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"],children:[Object(y.jsx)(j.a.Item,{icon:Object(y.jsx)(b.a,{}),children:Object(y.jsx)(O.a,{to:"".concat(m,"/"),children:"Home"})},"1"),Object(y.jsx)(j.a.Item,{icon:Object(y.jsx)(h.a,{}),children:Object(y.jsx)(O.a,{to:"".concat(m,"/clients"),children:"Clientes"})},"2"),Object(y.jsx)(j.a.Item,{icon:Object(y.jsx)(p.a,{}),children:Object(y.jsx)(O.a,{to:"".concat(m,"/products"),children:"Produtos"})},"3"),Object(y.jsx)(j.a.Item,{icon:Object(y.jsx)(h.a,{}),children:Object(y.jsx)(O.a,{to:"".concat(m,"/budgets"),children:"Or\xe7amentos"})},"4")]})]})},N=i(422),D=i(425),S=i(49),C=i(415),I=i(138),T=i(429),k=i(430),w=i(82),E=i(112),q=i(35),F=i(113),R=function(){function e(t,i,n,c,r,a){Object(q.a)(this,e),this.id=void 0,this.title=void 0,this.description=void 0,this.providerPrice=void 0,this.salePrice=void 0,this.discount=void 0,this.active=void 0,Object.setPrototypeOf(this,e.prototype),this.id=t,this.title=i,this.description=n,this.providerPrice=c,this.salePrice=r,this.discount=a,this.active=!0}return Object(F.a)(e,[{key:"toDTO",value:function(){return{title:this.title,description:this.description,providerPrice:this.providerPrice,salePrice:this.salePrice,discount:this.discount,active:this.active}}}]),e}(),z=function e(t,i,n,c,r){Object(q.a)(this,e),this.id=void 0,this.name=void 0,this.address=void 0,this.city=void 0,this.email=void 0,Object.setPrototypeOf(this,e.prototype),this.id=t,this.name=i,this.address=n,this.city=c,this.email=r},B=function(){function e(t,i,n,c,r){Object(q.a)(this,e),this.id=void 0,this.startDate=void 0,this.endDate=void 0,this.client=void 0,this.products=void 0,this.notes=void 0,this.discount=0,this.total=0,this.subTotal=0,Object.setPrototypeOf(this,e.prototype),Object.setPrototypeOf(this,(this instanceof e?this.constructor:void 0).prototype),this.id=t,this.startDate=new Date,this.endDate=i,this.client=n,this.products=c,this.notes=r,this.discount=0,this.calculateSubTotal(),this.calculateTotal()}return Object(F.a)(e,[{key:"calculateSubTotal",value:function(){var e=0;return this.products.forEach((function(t){e+=t.total})),this.subTotal=this.total=e,this.subTotal}},{key:"applyDiscount",value:function(e){isNaN(e)&&(e=0),this.discount=e,this.total=this.total*(1-e/100)}},{key:"calculateTotal",value:function(){return this.calculateSubTotal(),this.applyDiscount(this.discount),this.total}}]),e}(),V=function(){function e(t,i,n,c,r,a,s){Object(q.a)(this,e),this.quantity=void 0,this.id=void 0,this.title=void 0,this.description=void 0,this.providerPrice=void 0,this.salePrice=void 0,this.discount=void 0,this.active=void 0,this.total=void 0,Object.setPrototypeOf(this,e.prototype),this.id=t,this.title=i,this.description=n,this.providerPrice=c,this.salePrice=r,this.discount=0,this.active=!0,this.quantity=s,this.total=0,this.calculateSubTotal(),this.applyDiscount(a)}return Object(F.a)(e,[{key:"calculateSubTotal",value:function(){return this.total=this.salePrice*this.quantity,this.applyDiscount(this.discount),this.total}},{key:"applyDiscount",value:function(e){this.discount=e,this.total=this.total*(1-this.discount/100)}},{key:"toDTO",value:function(){return{title:this.title,description:this.description,providerPrice:this.providerPrice,salePrice:this.salePrice,discount:this.discount,active:this.active,quantity:this.quantity}}}]),e}();function A(e){var t=localStorage.getItem(e)||"";try{if(!t)throw new Error("No data found");return JSON.parse(t)}catch(i){return null}}function M(e,t){t&&localStorage.setItem(e,JSON.stringify(t))}var $=Object(n.createContext)({products:[],addProduct:function(){return null},removeProduct:function(){return null},editProduct:function(){return null}}),G=function(e){var t=Object(n.useState)(function(){var e=A(f)||[],t=[];return e&&e.forEach((function(e){t.push(new R(e.id,e.title,e.description,e.providerPrice,e.salePrice,e.discount))})),t}()),i=Object(s.a)(t,2),c=i[0],r=i[1];Object(n.useEffect)((function(){M(f,c)}),[c]);var a={products:c,addProduct:function(e){var t=new R(E.Guid.newGuid().toString(),e.title,e.description,e.providerPrice,e.salePrice,e.discount);r([].concat(Object(w.a)(c),[t]))},removeProduct:function(e){var t=c.filter((function(t){return t.id!==e}));r(t)},editProduct:function(e,t){var i=c.findIndex((function(t){return t.id===e}));-1!==i&&(c[i].active=t.active,c[i].title=t.title,c[i].description=t.description,c[i].discount=t.discount,c[i].salePrice=t.salePrice,c[i].providerPrice=t.providerPrice,r(Object(w.a)(c)))}};return Object(y.jsx)($.Provider,{value:a,children:e.children})},L=Object(n.createContext)({budgets:[],addBudget:function(){return null},removeBudget:function(){return null},editBudget:function(){return null}}),H=function(e){var t=Object(n.useState)(function(){var e=A(x)||[],t=[];return e&&e.forEach((function(e){var i=[];e.products.forEach((function(e){i.push(new V(e.id,e.title,e.description,e.providerPrice,e.salePrice,e.discount,e.quantity))})),t.push(new B(e.id,e.endDate,e.client,i,e.notes))})),t}()),i=Object(s.a)(t,2),c=i[0],r=i[1];Object(n.useEffect)((function(){M(x,c)}),[c]);var a={budgets:c,addBudget:function(e){var t=new B(E.Guid.newGuid().toString(),e.endDate,e.client,e.products,e.notes);r([].concat(Object(w.a)(c),[t]))},removeBudget:function(e){var t=c.filter((function(t){return t.id!==e}));r(t)},editBudget:function(e,t){var i=c.findIndex((function(t){return t.id===e}));-1!==i&&(c[i].startDate=t.startDate,c[i].endDate=t.endDate,c[i].client=t.client,c[i].discount=t.discount,c[i].notes=t.notes,c[i].products=t.products,c[i].total=t.total,r(Object(w.a)(c)))}};return Object(y.jsx)(L.Provider,{value:a,children:e.children})},J=Object(n.createContext)({clients:[],addClient:function(){return null},removeClient:function(){return null},editClient:function(){return null}}),Q=function(e){var t=Object(n.useState)(A(v)||[]),i=Object(s.a)(t,2),c=i[0],r=i[1];Object(n.useEffect)((function(){M(v,c)}),[c]);var a={clients:c,addClient:function(e){var t=new z(E.Guid.newGuid().toString(),e.name,e.email,e.address,e.city);r([].concat(Object(w.a)(c),[t]))},removeClient:function(e){var t=c.filter((function(t){return t.id!==e}));r(t)},editClient:function(e,t){var i=c.findIndex((function(t){return t.id===e}));-1!==i&&(c[i].name=t.name,c[i].address=t.address,c[i].city=t.city,c[i].email=t.email,r(Object(w.a)(c)))}};return Object(y.jsx)(J.Provider,{value:a,children:e.children})},U=N.a.confirm,_=function(e){var t=e.setProductId,i=Object(n.useContext)($),c=i.products,r=i.removeProduct,a=[{title:"Nome",dataIndex:"title"},{title:"Descri\xe7\xe3o",dataIndex:"description"},{title:"Pre\xe7o de venda",dataIndex:"salePrice",render:function(e){return Object(y.jsxs)("span",{children:["R$ ",e.toLocaleString("pt-BR",{minimumFractionDigits:2})]})}},{title:"A\xe7\xf5es",key:"action",render:function(e,i){return Object(y.jsxs)(D.b,{size:"middle",children:[Object(y.jsx)(S.a,{type:"primary",shape:"circle",icon:Object(y.jsx)(T.a,{}),size:"middle",onClick:function(){return e=i.id,void t(e);var e}}),Object(y.jsx)(S.a,{type:"primary",shape:"circle",icon:Object(y.jsx)(k.a,{}),size:"middle",danger:!0,onClick:function(){var e;U({title:"Tem ceteza que voc\xea quer remover o produto ".concat((e=i).title,"?"),icon:Object(y.jsx)(I.a,{}),content:"Remova s\xf3 se tiver certeza.",okText:"Sim",okType:"danger",cancelText:"N\xe3o",onOk:function(){r(e.id)},onCancel:function(){}})}})]})}}];return Object(y.jsx)(C.a,{dataSource:c,columns:a})},K=i(416),Y=i(421),W=i(411),X=function(e){var t=e.productId,i=e.isModalVisible,c=e.setIsModalVisible,r=Object(n.useContext)($),a=r.products,o=r.addProduct,d=r.editProduct,l=K.a.useForm(),u=Object(s.a)(l,1)[0];Object(n.useEffect)((function(){u.setFieldsValue({title:"",description:"",salePrice:0,providerPrice:0,discount:0}),u.setFieldsValue(j())}),[t]);var j=function(){var e=a.find((function(e){return e.id===t}));return e?{title:e.title,description:e.description,salePrice:e.salePrice,providerPrice:e.providerPrice,discount:e.discount}:{}};return Object(y.jsx)(N.a,{title:t?"Editar Produto":"Criar Produto",visible:i,footer:null,onCancel:function(){c(!1)},children:Object(y.jsxs)(K.a,{form:u,name:"form-create-edit-product",layout:"vertical",onFinish:function(e){var i={title:e.title,description:e.description,salePrice:e.salePrice,providerPrice:e.providerPrice,discount:e.discount,active:!0};t?d(t,i):o(i),c(!1),u.resetFields()},initialValues:j(),validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},children:[Object(y.jsx)(K.a.Item,{label:"T\xedtulo do produto",name:"title",rules:[{required:!0,message:"T\xedtulo \xe9 obrigat\xf3rio"},{min:5,max:30,message:"T\xedtulo deve ter entre 5 e 30 caracteres"}],children:Object(y.jsx)(Y.a,{placeholder:"Nome do produto"})}),Object(y.jsx)(K.a.Item,{label:"Descri\xe7\xe3o do produt",name:"description",rules:[{required:!0,message:"A descri\xe7\xe3o \xe9 obrigat\xf3ria"},{min:5,max:80,message:"A descri\xe7\xe3o deve ter entre 5 e 80 caracteres"}],children:Object(y.jsx)(Y.a,{placeholder:"Breve descri\xe7\xe3o do produto"})}),Object(y.jsx)(W.a,{children:Object(y.jsxs)(D.b,{children:[Object(y.jsx)(K.a.Item,{label:"Pre\xe7o de CUSTO do produto",name:"providerPrice",rules:[{required:!0,message:"O pre\xe7o \xe9 obrigat\xf3rio"}],children:Object(y.jsx)(Y.a,{type:"number",addonBefore:"R$",placeholder:"Pre\xe7o de custo do produto",step:"0.01",min:0})}),Object(y.jsx)(K.a.Item,{label:"Pre\xe7o de VENDA do produto",name:"salePrice",rules:[{required:!0,message:"O pre\xe7o de venda do produto \xe9 obrigat\xf3rio"}],children:Object(y.jsx)(Y.a,{type:"number",addonBefore:"R$",placeholder:"Pre\xe7o de venda do produto",step:"0.01",min:0})})]})}),Object(y.jsx)(K.a.Item,{children:Object(y.jsx)(S.a,{type:"primary",htmlType:"submit",children:t?"Editar":"Salvar"})})]})})},Z=i(431),ee=N.a.confirm,te=function(e){var t=Object(o.g)(),i=e.setBudgetId,c=Object(n.useContext)(L),r=c.budgets,a=c.removeBudget,s=[{title:"Cliente",render:function(e,t){return Object(y.jsx)("span",{children:t.client.name})}},{title:"email",render:function(e,t){return Object(y.jsx)("span",{children:t.client.email})}},{title:"Data cria\xe7\xe3o",render:function(e,t){return Object(y.jsx)("span",{children:new Date(t.startDate).toLocaleDateString("pt-BR")})}},{title:"Data validade",render:function(e,t){return Object(y.jsx)("span",{children:new Date(t.endDate).toLocaleDateString("pt-BR")})}},{title:"Quantidade de produtos",render:function(e,t){return Object(y.jsx)("span",{children:t.products.length})}},{title:"Total",render:function(e,t){return Object(y.jsxs)("span",{children:["R$ ",t.calculateTotal().toLocaleString("pt-BR")]})}},{title:"A\xe7\xf5es",key:"action",render:function(e,n){return Object(y.jsxs)(D.b,{size:"middle",children:[Object(y.jsx)(S.a,{type:"ghost",shape:"circle",icon:Object(y.jsx)(Z.a,{}),size:"middle",onClick:function(){return e=n.id,void t.push("".concat(m,"/budgets/pdf/").concat(e));var e}}),Object(y.jsx)(S.a,{type:"primary",shape:"circle",icon:Object(y.jsx)(T.a,{}),size:"middle",onClick:function(){return e=n.id,void i(e);var e}}),Object(y.jsx)(S.a,{type:"primary",shape:"circle",icon:Object(y.jsx)(k.a,{}),size:"middle",danger:!0,onClick:function(){return e=n,void ee({title:"Tem ceteza que voc\xea quer remover esse or\xe7amento?",icon:Object(y.jsx)(I.a,{}),content:"Remova s\xf3 se tiver certeza.",okText:"Sim",okType:"danger",cancelText:"N\xe3o",onOk:function(){a(e.id)},onCancel:function(){}});var e}})]})}}];return Object(y.jsx)(C.a,{dataSource:r,columns:s})},ie=i(103),ne=i(136),ce=i(420),re=i(236),ae=i.n(re),se=ne.a.Option,oe=N.a.confirm,de=function(e){var t,i=e.budgetId,c=e.isModalVisible,r=e.setIsModalVisible,a=Object(n.useContext)($).products,o=Object(n.useContext)(L),d=o.budgets,l=o.editBudget,u=o.addBudget,j=Object(n.useContext)(J).clients,b=Object(n.useState)({}),h=Object(s.a)(b,2),p=h[0],O=h[1],m=Object(n.useState)([]),f=Object(s.a)(m,2),x=f[0],v=f[1],g=K.a.useForm(),P=Object(s.a)(g,1)[0];Object(n.useEffect)((function(){E();var e=d.find((function(e){return e.id===i}))||{};i&&e&&v(e.products),P.setFieldsValue(T())}),[i,c]);var T=function(){var e=d.find((function(e){return e.id===i}));return e?{id:i,clientId:e.client.id,discount:e.discount,endDate:e.endDate,startDate:e.startDate,notes:e.notes}:{id:"",clientId:"",discount:0,startDate:new Date,endDate:new Date,notes:""}},w=[{title:"Nome",dataIndex:"title"},{title:"Quantidade",dataIndex:"quantity"},{title:"Desconto",render:function(e,t){return Object(y.jsxs)("span",{children:[t.discount,"%"]})}},{title:"SubTotal",render:function(e,t){return Object(y.jsxs)("span",{children:["R$ ",t.calculateSubTotal()]})}},{title:"A\xe7\xf5es",key:"action",render:function(e,t){return Object(y.jsx)(D.b,{size:"middle",children:Object(y.jsx)(S.a,{type:"primary",shape:"circle",icon:Object(y.jsx)(k.a,{}),size:"middle",danger:!0,onClick:function(){return e=t.id,void oe({title:"Tem ceteza que voc\xea quer remover esse produto?",icon:Object(y.jsx)(I.a,{}),okText:"Sim",okType:"danger",cancelText:"N\xe3o",onOk:function(){var t=x.filter((function(t){return t.id!==e}));v(t)},onCancel:function(){}});var e}})})}}],E=function(){P.resetFields(),O({}),v([])};return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(N.a,{title:i?"Editar or\xe7amento":"Criar or\xe7amento",visible:c,footer:null,onCancel:function(){E(),r(!1)},width:1e3,children:Object(y.jsxs)(K.a,{form:P,name:"form-create-edit-budget",layout:"vertical",onFinish:function(e){var t=j.find((function(t){return t.id===e.clientId}))||{},n={discount:e.discount,endDate:e.endDate,notes:e.notes,total:e.total,client:t,startDate:new Date,products:x};i?l(i,n):u(n),E(),r(!1)},initialValues:T(),children:[Object(y.jsx)(K.a.Item,{label:"Adicionar cliente",name:"clientId",children:Object(y.jsx)(ne.a,{showSearch:!0,placeholder:"Selecione o cliente",optionFilterProp:"children",children:j.map((function(e){return Object(y.jsxs)(se,{value:e.id,children:[e.name," - ",e.email]},e.id)}))})}),Object(y.jsx)("label",{children:"Adicionar Produtos"}),Object(y.jsxs)(D.b,{direction:"horizontal",size:16,style:{marginBottom:16},children:[Object(y.jsx)("span",{children:"Produto: "}),Object(y.jsx)(ne.a,{showSearch:!0,style:{width:200},placeholder:"Selecione o produto",optionFilterProp:"children",value:null!==(t=null===p||void 0===p?void 0:p.id)&&void 0!==t?t:"",onChange:function(e){var t=a.find((function(t){return t.id===e}));if(t){var i=new V(t.id,t.title,t.description,t.providerPrice,t.salePrice,0,1);O(i)}},children:a.map((function(e){return Object(y.jsx)(se,{value:e.id,children:e.title},e.id)}))}),Object(y.jsx)("span",{children:"Quantidade: "}),Object(y.jsx)(ce.a,{placeholder:"Quantidade",min:1,value:p.quantity,onChange:function(e){O(Object(ie.a)(Object(ie.a)({},p),{},{quantity:e}))}}),Object(y.jsx)("span",{children:"Desconto: "}),Object(y.jsx)(ce.a,{placeholder:"Desconto no produto",min:0,max:100,value:p.discount,onChange:function(e){null===p||void 0===p||p.applyDiscount(e),O(Object(ie.a)({},p))}}),Object(y.jsx)(S.a,{type:"primary",onClick:function(){var e=Number(null===p||void 0===p?void 0:p.quantity)||0,t=Number(null===p||void 0===p?void 0:p.discount)||0,i=[];x.forEach((function(e){i.push(new V(e.id,e.title,e.description,e.providerPrice,e.salePrice,e.discount,e.quantity))}));var n=i.findIndex((function(e){return e.id===p.id}));-1!==n?(i[n].quantity+=e,i[n].discount+=t):i.push(new V(p.id,p.title,p.description,p.providerPrice,p.salePrice,p.discount,p.quantity)),v([].concat(i)),O({})},children:"Adicionar"})]}),Object(y.jsx)(C.a,{columns:w,dataSource:x}),Object(y.jsx)(K.a.Item,{label:"Observa\xe7\xf5es/Anota\xe7\xf5es",name:"notes",children:Object(y.jsx)(ae.a,{})}),Object(y.jsx)(K.a.Item,{children:Object(y.jsx)(S.a,{type:"primary",htmlType:"submit",children:i?"Editar":"Salvar"})})]})})})},le=N.a.confirm,ue=function(e){var t=e.setClientId,i=Object(n.useContext)(J),c=i.clients,r=i.removeClient,a=[{title:"Cliente",breakpoint:["md"],render:function(e,t){return Object(y.jsx)("span",{children:t.name})}},{title:"E-mail",breakpoint:["md"],render:function(e,t){return Object(y.jsx)("span",{children:t.email})}},{title:"Endere\xe7o",breakpoint:["md"],render:function(e,t){return Object(y.jsx)("span",{children:t.address})}},{title:"Cidade",breakpoint:["md"],render:function(e,t){return Object(y.jsx)("span",{children:t.city})}},{title:"A\xe7\xf5es",breakpoint:["md"],key:"action",render:function(e,i){return Object(y.jsxs)(D.b,{size:"middle",children:[Object(y.jsx)(S.a,{type:"primary",shape:"circle",icon:Object(y.jsx)(T.a,{}),size:"middle",onClick:function(){return e=i.id,void t(e);var e}}),Object(y.jsx)(S.a,{type:"primary",shape:"circle",icon:Object(y.jsx)(k.a,{}),size:"middle",danger:!0,onClick:function(){return e=i,void le({title:"Tem ceteza que voc\xea quer remover esse cliente?",icon:Object(y.jsx)(I.a,{}),content:"Remova s\xf3 se tiver certeza.",okText:"Sim",okType:"danger",cancelText:"N\xe3o",onOk:function(){r(e.id)},onCancel:function(){}});var e}})]})}}];return Object(y.jsx)(C.a,{dataSource:c,columns:a})},je=function(e){var t=e.clientId,i=e.isModalVisible,c=e.setIsModalVisible,r=K.a.useForm(),a=Object(s.a)(r,1)[0],o=Object(n.useContext)(J),d=o.clients,l=o.editClient,u=o.addClient;Object(n.useEffect)((function(){a.setFieldsValue({id:"",name:"",address:"",city:"",email:""}),a.setFieldsValue(j())}),[t]);var j=function(){var e=d.find((function(e){return e.id===t}));return e?Object(ie.a)({},e):{}};return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(N.a,{title:t?"Editar cliente":"Criar cliente",visible:i,footer:null,onCancel:function(){c(!1)},children:Object(y.jsxs)(K.a,{form:a,name:"form-create-edit-client",layout:"vertical",onFinish:function(e){var i=Object(ie.a)({},e);t?l(t,i):u(i),c(!1),a.resetFields()},initialValues:j(),children:[Object(y.jsx)(K.a.Item,{label:"Nome",name:"name",children:Object(y.jsx)(Y.a,{})}),Object(y.jsx)(K.a.Item,{label:"E-mail",name:"email",children:Object(y.jsx)(Y.a,{})}),Object(y.jsx)(K.a.Item,{label:"Rua..., numero",name:"address",children:Object(y.jsx)(Y.a,{})}),Object(y.jsx)(K.a.Item,{label:"Cidade",name:"city",children:Object(y.jsx)(Y.a,{})}),Object(y.jsx)(K.a.Item,{children:Object(y.jsx)(S.a,{type:"primary",htmlType:"submit",children:t?"Editar":"Salvar"})})]})})})},be=i(417),he=i(432),pe=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),i=t[0],c=t[1],r=Object(n.useState)(""),a=Object(s.a)(r,2),o=a[0],d=a[1],l=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c(e)},u=[{path:"".concat(m,"/"),breadcrumbName:"Home"},{path:"".concat(m,"/clients"),breadcrumbName:"Clientes"}];return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(be.a,{className:"site-page-header",title:"Clientes",breadcrumb:{routes:u},subTitle:"Listagem de cliente",extra:[Object(y.jsx)(S.a,{type:"primary",shape:"round",icon:Object(y.jsx)(he.a,{}),size:"large",onClick:function(){d(""),l(!0)},children:"Adicionar cliente"})]}),Object(y.jsx)(je,{clientId:o,isModalVisible:i,setIsModalVisible:l}),Object(y.jsx)(ue,{setClientId:function(e){d(e),l(!0)}})]})},Oe=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),i=t[0],c=t[1],r=Object(n.useState)(""),a=Object(s.a)(r,2),o=a[0],d=a[1],l=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c(e)},u=[{path:"".concat(m,"/"),breadcrumbName:"Home"},{path:"".concat(m,"/budgets"),breadcrumbName:"Or\xe7amentos"}];return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(be.a,{className:"site-page-header",title:"Or\xe7amentos",breadcrumb:{routes:u},subTitle:"Listagem de produtos",extra:[Object(y.jsx)(S.a,{type:"primary",shape:"round",icon:Object(y.jsx)(he.a,{}),size:"large",onClick:function(){d(""),l(!0)},children:"Adicionar Or\xe7amento"})]}),Object(y.jsx)(de,{budgetId:o,isModalVisible:i,setIsModalVisible:l}),Object(y.jsx)(te,{setBudgetId:function(e){d(e),l(!0)}})]})},me=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),i=t[0],c=t[1],r=Object(n.useState)(""),a=Object(s.a)(r,2),o=a[0],d=a[1],l=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c(e)},u=[{path:"".concat(m,"/"),breadcrumbName:"Home"},{path:"".concat(m,"/products"),breadcrumbName:"Produtos"}];return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(be.a,{className:"site-page-header",title:"Produtos",breadcrumb:{routes:u},subTitle:"Listagem de produtos",extra:[Object(y.jsx)(S.a,{type:"primary",shape:"round",icon:Object(y.jsx)(he.a,{}),size:"large",onClick:function(){d(""),l(!0)},children:"Adicionar Produto"})]}),Object(y.jsx)(X,{productId:o,isModalVisible:i,setIsModalVisible:l}),Object(y.jsx)(_,{setProductId:function(e){d(e),l(!0)}})]})},fe=function(){return Object(y.jsx)("div",{children:Object(y.jsx)("h1",{children:"Gerador de Or\xe7amento"})})},xe=i(98),ve=i.n(xe),ye=i(133),ge=i(169),Pe=(i(403),i(418)),Ne=i(423),De={GenerateBase64Pdf:function(){var e=Object(ye.a)(ve.a.mark((function e(t,i){return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(Pe.a)(t,{paperSize:"A4"}).then((function(e){return Object(Ne.a)(e)})).then((function(e){return e.replace("data:application/pdf;base64,","")})));case 1:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),SendToAPI:function(){var e=Object(ye.a)(ve.a.mark((function e(t){var i;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:7071/api/post-budget",e.next=3,fetch("http://localhost:7071/api/post-budget",{method:"POST",body:JSON.stringify({email:t})});case 3:return i=e.sent,e.abrupt("return",i&&i.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),GenerateFilePdfDownload:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"arquivo";Object(ge.b)(e,{paperSize:"A4",margin:40,fileName:"".concat((new Date).getFullYear(),"-").concat((new Date).getMonth(),"-").concat((new Date).getDay(),"-").concat(t,".pdf")})}},Se=function(){var e=Object(o.h)().budgetId,t=Object(n.useContext)(L).budgets,i=Object(n.useState)({}),c=Object(s.a)(i,2),r=c[0],a=c[1];Object(n.useEffect)((function(){var i=t.find((function(t){return t.id===e}));if(i){var n=new B(i.id,i.endDate,i.client,i.products,i.notes);a(n)}}),[e]);var d=Object(n.useRef)(null),l=Object(n.useRef)(null);return Object(y.jsxs)(y.Fragment,{children:[function(){var e,t,i,n,c;return Object(y.jsx)("div",{className:"render-pdf",children:Object(y.jsx)(ge.a,{ref:l,paperSize:"auto",fileName:"Report for ".concat((new Date).getFullYear()),author:"KendoReact Team",children:Object(y.jsx)("div",{ref:d,children:Object(y.jsxs)("div",{id:"body-pdf",children:[Object(y.jsxs)("div",{className:"header-pdf",children:[Object(y.jsxs)("div",{className:"company-info-pdf",children:[Object(y.jsx)("p",{className:"p0",children:"Stevanini Inc."}),Object(y.jsx)("p",{className:"p1",children:"nao-responda@stevanini.com.br"}),Object(y.jsx)("p",{className:"p1",children:"Rua Hon\xf3rio Lacerda Filho, 132"}),Object(y.jsx)("p",{className:"p1",children:"Leopoldina-MG"})]}),Object(y.jsx)("div",{className:"company-info-pdf",children:Object(y.jsx)("p",{className:"p8 p-right",children:"OR\xc7AMENTO"})})]}),Object(y.jsxs)("div",{className:"header-pdf mt-30",children:[Object(y.jsxs)("div",{className:"company-info-pdf",children:[Object(y.jsx)("p",{className:"p9 ft6",children:"Para o cliente:"}),Object(y.jsx)("p",{className:"p9 ft1",children:null===r||void 0===r||null===(e=r.client)||void 0===e?void 0:e.name}),Object(y.jsx)("p",{className:"p9 ft1",children:null===r||void 0===r||null===(t=r.client)||void 0===t?void 0:t.email}),Object(y.jsx)("p",{className:"p9 ft1",children:null===r||void 0===r||null===(i=r.client)||void 0===i?void 0:i.address}),Object(y.jsx)("p",{className:"p9 ft1",children:null===r||void 0===r||null===(n=r.client)||void 0===n?void 0:n.city})]}),Object(y.jsx)("div",{className:"company-info-pdf",children:Object(y.jsxs)("table",{className:"t1",children:[Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"tr1 td0",children:Object(y.jsx)("p",{className:"p9 ft6",children:"Data do Or\xe7amento"})}),Object(y.jsx)("td",{className:"tr1 td1",children:Object(y.jsx)("p",{className:"p9 ft1 p-right",children:(null===r||void 0===r?void 0:r.startDate)?new Date(r.startDate).toLocaleDateString("pt-BR"):"--"})})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"tr2 td0",children:Object(y.jsx)("p",{className:"p9 ft6",children:"V\xe1lido at\xe9"})}),Object(y.jsx)("td",{className:"tr2 td1",children:Object(y.jsx)("p",{className:"p9 ft1 p-right",children:(null===r||void 0===r?void 0:r.endDate)?new Date(r.endDate).toLocaleDateString("pt-BR"):"Sem limite de validade"})})]})]})})]}),Object(y.jsxs)("table",{className:"t2",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{className:"t2-header",children:"Nome do produto"}),Object(y.jsx)("th",{className:"t2-header p-center w-100px",children:"Quantidade"}),Object(y.jsx)("th",{className:"t2-header p-center w-100px",children:"Pre\xe7o"}),Object(y.jsx)("th",{className:"t2-header p-center w-100px",children:"Total"})]})}),Object(y.jsx)("tbody",{children:null===r||void 0===r||null===(c=r.products)||void 0===c?void 0:c.map((function(e){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"t2-col",children:e.title}),Object(y.jsx)("td",{className:"t2-col p-center w-100px",children:e.quantity}),Object(y.jsxs)("td",{className:"t2-col p-center w-100px",children:["R$ ",e.salePrice||0]}),Object(y.jsxs)("td",{className:"t2-col p-center w-100px",children:["R$ ",e.total||0]})]})}))})]}),Object(y.jsx)("div",{className:"t3-container",children:Object(y.jsxs)("table",{className:"t3",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{className:"t3-header",children:Object(y.jsx)("p",{className:"p9 ft6",children:"Subtotal"})}),Object(y.jsx)("th",{className:"t3-header ",children:Object(y.jsxs)("p",{className:"p9 ft1 p-right",children:["R$ ",r.subTotal]})})]})}),Object(y.jsxs)("tbody",{children:[(null===r||void 0===r?void 0:r.discount)?Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"t3-col",children:Object(y.jsx)("p",{className:"p9 ft6",children:"Descontos(%)"})}),Object(y.jsx)("td",{className:"t3-col",children:Object(y.jsxs)("p",{className:"p9 ft1 p-right",children:[null===r||void 0===r?void 0:r.discount," %"]})})]}):Object(y.jsx)("tr",{}),Object(y.jsxs)("tr",{className:"t3-footer",children:[Object(y.jsx)("td",{className:"t3-col",children:Object(y.jsx)("p",{className:"p9 ft6",children:"TOTAL"})}),Object(y.jsx)("td",{className:"t3-col",children:Object(y.jsxs)("p",{className:"p9 ft1 p-right",children:["RS ",r.total]})})]})]})]})}),Object(y.jsx)("p",{className:"p3 ft2 pdt-30",children:"Observa\xe7\xf5es:"}),Object(y.jsx)("p",{className:"p1 pdb-30",children:null===r||void 0===r?void 0:r.notes})]})})})})}(),Object(y.jsx)(D.b,{style:{width:"100%",justifyContent:"center",margin:30},children:Object(y.jsx)(S.a,{type:"primary",onClick:function(){var e=d.current||document.body;De.GenerateFilePdfDownload(e,(null===r||void 0===r?void 0:r.client.email)+".pdf")},children:"Baixar arquivo em PDF"})})]})},Ce=function(){return Object(y.jsxs)(o.d,{children:[Object(y.jsx)(o.b,{path:"".concat(m,"/"),exact:!0,component:fe}),Object(y.jsx)(o.b,{path:"".concat(m,"/products"),exact:!0,component:me}),Object(y.jsx)(o.b,{path:"".concat(m,"/budgets"),exact:!0,component:Oe}),Object(y.jsx)(o.b,{path:"".concat(m,"/budgets/pdf/:budgetId"),component:Se}),Object(y.jsx)(o.b,{path:"".concat(m,"/clients"),exact:!0,component:pe}),Object(y.jsx)(o.a,{from:"*",to:"".concat(m,"/")})]})},Ie=i(433),Te=i(434),ke=u.a.Header,we=u.a.Content;var Ee=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),i=t[0],r=t[1];return Object(y.jsx)(o.c,{history:l,children:Object(y.jsx)(Q,{children:Object(y.jsx)(H,{children:Object(y.jsx)(G,{children:Object(y.jsxs)(u.a,{style:{minHeight:"100vh"},children:[Object(y.jsx)(P,{collapse:i}),Object(y.jsxs)(u.a,{children:[Object(y.jsx)(ke,{style:{padding:0,background:"#fff"},children:c.a.createElement(i?Ie.a:Te.a,{className:"trigger",onClick:function(){r(!i)}})}),Object(y.jsx)(we,{style:{margin:"24px 16px",padding:24,minHeight:280,background:"#fff"},children:Object(y.jsx)(Ce,{})})]})]})})})})})};i(404),i(405);a.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(Ee,{})}),document.getElementById("root"))}},[[406,1,2]]]);
//# sourceMappingURL=main.5fffd9b4.chunk.js.map