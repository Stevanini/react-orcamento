(this["webpackJsonpreact-orcamento"]=this["webpackJsonpreact-orcamento"]||[]).push([[0],{121:function(e,t,c){},229:function(e,t,c){},230:function(e,t,c){"use strict";c.r(t);var r=c(1),s=c.n(r),i=c(42),n=c.n(i),a=(c(121),c(12)),l=c(0),d=function(){return Object(l.jsx)("div",{className:"uk-background-primary ",children:Object(l.jsx)("div",{className:"uk-container",children:Object(l.jsx)("nav",{className:"uk-navbar",children:Object(l.jsx)("div",{className:"uk-navbar-left",children:Object(l.jsx)(a.b,{to:"/",className:"uk-navbar-item uk-text-decoration-none uk-logo ro-white",children:"Gereciador de Or\xe7amentos"})})})})})},o=c(7),j=c(16),u=c(108),b=c(4),h=c(5),p=function(){function e(t,c,r,s,i,n,a){Object(b.a)(this,e),this.id=t,this.title=c,this.description=r,this.providerPrice=s,this.salePrice=i,this.discount=n,this.active=a}return Object(h.a)(e,[{key:"toDTO",value:function(){return{title:this.title,description:this.description,providerPrice:this.providerPrice,salePrice:this.salePrice,discount:this.discount,active:this.active}}}]),e}(),O=function e(t,c,r){Object(b.a)(this,e),this.to=t,this.subject=c,this.fileBase64=r},x="PRODUCT_STORE",m=function(){var e=localStorage.getItem(x)||"";try{return JSON.parse(e)}catch(t){return[]}},v=Object(r.createContext)({products:[],addProduct:function(){return null},removeProduct:function(){return null},editProduct:function(){return null}}),f=function(e){var t=Object(r.useState)(m),c=Object(j.a)(t,2),s=c[0],i=c[1];Object(r.useEffect)((function(){!function(e){(null===e||void 0===e?void 0:e.length)>0&&localStorage.setItem(x,JSON.stringify(e))}(s)}),[s]);var n={products:s,addProduct:function(e){var t=new p(u.Guid.newGuid().toString(),e.title,e.description,e.providerPrice,e.salePrice,e.discount,!0);i([].concat(Object(o.a)(s),[t]))},removeProduct:function(e){var t=s.filter((function(t){return t.id!==e}));i(t)},editProduct:function(e,t){var c=s.findIndex((function(t){return t.id===e}));-1!==c&&(s[c].active=t.active,s[c].title=t.title,s[c].description=t.description,s[c].discount=t.discount,s[c].salePrice=t.salePrice,s[c].providerPrice=t.providerPrice,i(Object(o.a)(s)))}};return Object(l.jsx)(v.Provider,{value:n,children:e.children})},N=function(e){var t=Object(r.useContext)(v).removeProduct;return Object(l.jsxs)("tr",{className:"uk-animation-slide-bottom-medium",children:[Object(l.jsx)("td",{className:"uk-width-auto",children:e.product.title}),Object(l.jsx)("td",{className:"uk-width-auto",children:e.product.description}),Object(l.jsxs)("td",{className:"uk-width-auto",children:["R$ ",e.product.salePrice.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),Object(l.jsxs)("td",{className:"uk-width-auto uk-column-1-2",children:[Object(l.jsx)("div",{children:Object(l.jsx)("button",{className:"uk-icon-button uk-button-primary","uk-icon":"file-edit",onClick:function(){return t=e.product.id,void(window.location.href="/products/create/"+t);var t}})}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{className:"uk-icon-button uk-button-danger","uk-icon":"trash",onClick:function(){return c=e.product.id,void t(c);var c}})})]})]})},k=function(){var e=Object(r.useContext)(v).products;return Object(l.jsxs)("table",{className:"uk-table",children:[Object(l.jsx)("caption",{children:"Lista de produtos"}),Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Nome"}),Object(l.jsx)("th",{children:"Descri\xe7\xe3o"}),Object(l.jsx)("th",{children:"Pre\xe7o"}),Object(l.jsx)("th",{children:"A\xe7\xf5es"})]})}),Object(l.jsx)("tbody",{children:null===e||void 0===e?void 0:e.map((function(e){return Object(l.jsx)(N,{product:e},e.id.toString())}))})]})},g=c(10),P=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("ul",{className:"uk-breadcrumb",children:[Object(l.jsx)("li",{children:Object(l.jsx)(a.b,{to:"/",children:"Home"})}),Object(l.jsx)("li",{children:Object(l.jsx)("span",{children:"Or\xe7amentos"})})]}),Object(l.jsx)("p",{children:"Budgets"})]})},y=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("ul",{className:"uk-breadcrumb",children:[Object(l.jsx)("li",{children:Object(l.jsx)(a.b,{to:"/",children:"Home"})}),Object(l.jsx)("li",{children:Object(l.jsx)("span",{children:"Produtos"})})]}),Object(l.jsx)("nav",{className:"uk-navbar",children:Object(l.jsx)("div",{className:"uk-navbar-right",children:Object(l.jsxs)("ul",{className:"uk-navbar-nav",children:[Object(l.jsx)("li",{children:Object(l.jsxs)(a.b,{to:"/pdf",children:[Object(l.jsx)("span",{"uk-icon":"icon: file-pdf; ratio: 1.2"})," ","Gerar PDF"]})}),Object(l.jsx)("li",{children:Object(l.jsxs)(a.b,{to:"/products/create",children:[Object(l.jsx)("span",{"uk-icon":"icon: plus; ratio: 1.2"})," ","Adicionar novo produto"]})})]})})}),Object(l.jsx)(k,{})]})},w=function(){return Object(l.jsxs)("div",{className:"uk-grid-column-small uk-grid-row-large",children:[Object(l.jsx)(a.b,{to:"/products",children:Object(l.jsxs)("div",{className:"uk-card uk-card-primary uk-card-hover uk-card-body uk-light",children:[Object(l.jsx)("h3",{className:"uk-card-title",children:"Produtos"}),Object(l.jsx)("p",{children:"Criar e listar os produtos para adicionar nos or\xe7amentos"})]})}),Object(l.jsx)(a.b,{to:"/budgets",children:Object(l.jsxs)("div",{className:"uk-card uk-card-primary uk-card-hover uk-card-body uk-light",children:[Object(l.jsx)("h3",{className:"uk-card-title",children:"Or\xe7amentos"}),Object(l.jsx)("p",{children:"Criar e listar os or\xe7amentos dos clientes"})]})})]})},S=c(31),D=c(36),T=c(46),C=c(114),R=T.b().shape({title:T.c().min(5).max(30).required("T\xedtulo inv\xe1lido"),description:T.c().min(5).max(80).required("Descri\xe7\xe3o inv\xe1lido"),salePrice:T.a().min(0).required("Pre\xe7o inv\xe1lido"),providerPrice:T.a().min(0).required("Pre\xe7o inv\xe1lido")}),F=function(){var e=Object(g.g)().productId;console.log(e);var t=Object(r.useContext)(v),c=t.products,s=t.addProduct,i=t.editProduct,n=Object(r.useState)({}),d=Object(j.a)(n,2),o=d[0],u=d[1],b=Object(D.d)({resolver:Object(C.a)(R)}),h=b.register,p=b.handleSubmit,O=b.formState.errors,x=b.setValue;Object(r.useEffect)((function(){var t=c.find((function(t){return t.id===e}));x("title",null===t||void 0===t?void 0:t.title),x("description",null===t||void 0===t?void 0:t.description),x("salePrice",null===t||void 0===t?void 0:t.salePrice),x("providerPrice",null===t||void 0===t?void 0:t.providerPrice),x("discount",null===t||void 0===t?void 0:t.discount),u(t||{})}),[e,c,x]);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("ul",{className:"uk-breadcrumb",children:[Object(l.jsx)("li",{children:Object(l.jsx)(a.b,{to:"/",children:"Home"})}),Object(l.jsx)("li",{children:Object(l.jsx)(a.b,{to:"/products",children:"Produtos"})}),Object(l.jsx)("li",{children:Object(l.jsxs)("span",{children:[e?"Editar":"Criar"," produto"]})})]}),Object(l.jsxs)("form",{onSubmit:p((function(t,c){console.log(t);var r={title:t.title,description:t.description,salePrice:t.salePrice,providerPrice:t.providerPrice,discount:t.discount,active:!0};e?i(e,r):s(r),c.target.reset(),window.location.href="/products"})),className:"uk-form-stacked",children:[Object(l.jsx)("h4",{children:"Novo produto"}),Object(l.jsx)("label",{className:"uk-margin uk-form-label",children:"T\xedtulo do produto"}),Object(l.jsxs)("div",{className:"uk-form-controls",children:[Object(l.jsx)("input",Object(S.a)(Object(S.a)({type:"text",id:"title",placeholder:"Titulo do produto",className:"uk-input"},h("title")),{},{value:o.title||"",onChange:function(e){h("title"),u(Object.assign({},o,{title:e.target.value}))}})),O.title&&"required"===O.title.type&&Object(l.jsx)("span",{children:Object(l.jsx)("small",{children:Object(l.jsx)("strong",{className:"uk-text-danger",children:"O t\xedtulo \xe9 obrigat\xf3rio."})})}),O.title&&("min"===O.title.type||"max"===O.title.type)&&Object(l.jsx)("span",{children:Object(l.jsx)("small",{children:Object(l.jsx)("strong",{className:"uk-text-danger",children:"O t\xedtulo deve ter entre 5 e 30 caracteres"})})})]}),Object(l.jsx)("label",{className:"uk-margin uk-form-label",children:"Descri\xe7\xe3o do produto"}),Object(l.jsxs)("div",{className:"uk-form-controls",children:[Object(l.jsx)("input",Object(S.a)(Object(S.a)({type:"text",id:"description",placeholder:"Breve descri\xe7\xe3o do produto",className:"uk-input"},h("description")),{},{value:o.description||"",onChange:function(e){h("description"),u(Object.assign({},o,{description:e.target.value}))}})),O.description&&"required"===O.description.type&&Object(l.jsx)("span",{children:Object(l.jsx)("small",{children:Object(l.jsx)("strong",{className:"uk-text-danger",children:"A descri\xe7\xe3o \xe9 obrigat\xf3rio."})})}),O.description&&("min"===O.description.type||"max"===O.description.type)&&Object(l.jsx)("span",{children:Object(l.jsx)("small",{children:Object(l.jsx)("strong",{className:"uk-text-danger",children:"A descri\xe7\xe3o deve ter entre 5 e 80 caracteres"})})})]}),Object(l.jsxs)("div",{className:"uk-margin  uk-column-1-2",children:[Object(l.jsx)("label",{className:"uk-margin uk-form-label",children:"Pre\xe7o de custo do produto"}),Object(l.jsxs)("div",{className:"uk-form-controls",children:[Object(l.jsx)("input",Object(S.a)(Object(S.a)({type:"number",id:"providerPrice",placeholder:"Pre\xe7o de custo do produto",className:"uk-input",step:"0.01"},h("providerPrice")),{},{value:o.providerPrice||0,onChange:function(e){h("providerPrice"),u(Object.assign({},o,{providerPrice:e.target.value}))}})),O.providerPrice&&("required"===O.providerPrice.type||"typeError"===O.providerPrice.type)&&Object(l.jsx)("span",{children:Object(l.jsx)("small",{children:Object(l.jsx)("strong",{className:"uk-text-danger",children:"O pre\xe7o \xe9 obrigat\xf3rio."})})}),O.providerPrice&&"min"===O.providerPrice.type&&Object(l.jsx)("span",{children:Object(l.jsx)("small",{children:Object(l.jsx)("strong",{className:"uk-text-danger",children:"O pre\xe7o n\xe3o pode ser negativo"})})})]}),Object(l.jsx)("label",{className:"uk-margin uk-form-label",children:"Pre\xe7o de venda do produto"}),Object(l.jsxs)("div",{className:"uk-form-controls",children:[Object(l.jsx)("input",Object(S.a)(Object(S.a)({type:"number",id:"salePrice",placeholder:"Pre\xe7o de venda do produto",className:"uk-input",step:"0.01"},h("salePrice")),{},{value:o.salePrice||0,onChange:function(e){h("salePrice"),u(Object.assign({},o,{salePrice:e.target.value}))}})),O.salePrice&&("required"===O.salePrice.type||"typeError"===O.salePrice.type)&&Object(l.jsx)("span",{children:Object(l.jsx)("small",{children:Object(l.jsx)("strong",{className:"uk-text-danger",children:"O pre\xe7o \xe9 obrigat\xf3rio."})})}),O.salePrice&&"min"===O.salePrice.type&&Object(l.jsx)("span",{children:Object(l.jsx)("small",{children:Object(l.jsx)("strong",{className:"uk-text-danger",children:"O pre\xe7o n\xe3o pode ser negativo"})})})]})]}),Object(l.jsx)("div",{className:"uk-width-1-1",children:Object(l.jsx)("button",{type:"submit",className:"uk-button uk-button-primary",children:e?"Editar":"Salvar"})})]})]})},q=c(6),A=c.n(q),B=c(18),E=c(67),G=(c(229),c(235)),I=c(237),L={GenerateBase64Pdf:function(){var e=Object(B.a)(A.a.mark((function e(t,c){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(G.a)(t,{paperSize:"A4",margin:{left:40,top:40,right:40,bottom:40}}).then((function(e){return Object(I.a)(e)})).then((function(e){return e.replace("data:application/pdf;base64,","")})));case 1:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),SendToAPI:function(){var e=Object(B.a)(A.a.mark((function e(t){var c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:7071/api/post-budget",e.next=3,fetch("http://localhost:7071/api/post-budget",{method:"POST",body:JSON.stringify({email:t})});case 3:return c=e.sent,e.abrupt("return",c&&c.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),GenerateFilePdfDownload:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"arquivo";Object(E.b)(e,{paperSize:"A4",margin:40,fileName:"".concat((new Date).getFullYear(),"-").concat((new Date).getMonth(),"-").concat((new Date).getDay(),"-").concat(t,".pdf")})}},H=function(e){var t,c=e.budget,s=Object(r.useRef)(null),i=Object(r.useRef)(null),n=function(){var e=Object(B.a)(A.a.mark((function e(){var t,c,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.current||document.body,e.next=3,L.GenerateBase64Pdf(t);case 3:return c=e.sent,r=new O("romulo-gouvea@hotmail.com","O assunto vindo do post",c),e.next=7,L.SendToAPI(r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("ul",{className:"uk-breadcrumb",children:[Object(l.jsx)("li",{children:Object(l.jsx)(a.b,{to:"/",children:"Home"})}),Object(l.jsx)("li",{children:Object(l.jsx)("span",{children:"Visualizar pdf"})})]}),Object(l.jsx)("div",{className:"container-pdf",children:Object(l.jsx)(E.a,{ref:i,paperSize:"auto",margin:40,fileName:"Report for ".concat((new Date).getFullYear()),author:"KendoReact Team",children:Object(l.jsx)("div",{ref:s,children:Object(l.jsxs)("div",{id:"body-pdf",children:[Object(l.jsxs)("table",{className:"t0",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsxs)("th",{className:"t0-col",children:[Object(l.jsx)("p",{className:"p0",children:"Stevanini Inc."}),Object(l.jsx)("p",{className:"p1",children:"Rua Hon\xf3rio Lacerda Filho, 132"}),Object(l.jsx)("p",{className:"p1",children:"Leopoldina-MG"})]}),Object(l.jsx)("th",{className:"t0-col",children:Object(l.jsx)("p",{className:"p8",children:"OR\xc7AMENTO"})})]})}),Object(l.jsx)("tbody",{children:Object(l.jsxs)("tr",{children:[Object(l.jsxs)("td",{className:"t0-col",children:[Object(l.jsx)("p",{className:"p3 ft2 mt-30",children:"Para o cliente:"}),Object(l.jsx)("p",{className:"p1",children:null===c||void 0===c?void 0:c.client.name}),Object(l.jsx)("p",{className:"p1",children:null===c||void 0===c?void 0:c.client.address}),Object(l.jsx)("p",{className:"p1",children:null===c||void 0===c?void 0:c.client.city})]}),Object(l.jsx)("td",{className:"t0-br",children:Object(l.jsxs)("table",{className:"t1",children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{className:"tr1 td0",children:Object(l.jsx)("p",{className:"p9 ft6",children:"Data do Or\xe7amento"})}),Object(l.jsx)("td",{className:"tr1 td1",children:Object(l.jsx)("p",{className:"p9 ft1 p-right",children:null===c||void 0===c?void 0:c.date.toLocaleDateString("pt-BR")})})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{className:"tr2 td0",children:Object(l.jsx)("p",{className:"p9 ft6",children:"V\xe1lido at\xe9"})}),Object(l.jsx)("td",{className:"tr2 td1",children:Object(l.jsx)("p",{className:"p9 ft1 p-right",children:null===c||void 0===c?void 0:c.dateValid.toLocaleDateString("pt-BR")})})]})]})})]})})]}),Object(l.jsxs)("table",{className:"t2",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{className:"t2-header",children:"Nome do produto"}),Object(l.jsx)("th",{className:"t2-header p-center w-100px",children:"Quantidade"}),Object(l.jsx)("th",{className:"t2-header p-center w-100px",children:"Pre\xe7o"}),Object(l.jsx)("th",{className:"t2-header p-center w-100px",children:"Total"})]})}),Object(l.jsx)("tbody",{children:null===c||void 0===c||null===(t=c.products)||void 0===t?void 0:t.map((function(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{className:"t2-col",children:e.title}),Object(l.jsx)("td",{className:"t2-col p-center w-100px",children:e.quantity}),Object(l.jsxs)("td",{className:"t2-col p-center w-100px",children:["R$ ",e.salePrice]}),Object(l.jsxs)("td",{className:"t2-col p-center w-100px",children:["R$ ",e.calculateSubTotal()]})]})}))})]}),Object(l.jsx)("div",{className:"t3-container",children:Object(l.jsxs)("table",{className:"t3",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{className:"t3-header",children:Object(l.jsx)("p",{className:"p9 ft6",children:"Subtotal"})}),Object(l.jsx)("th",{className:"t3-header ",children:Object(l.jsxs)("p",{className:"p9 ft1 p-right",children:["R$ ",null===c||void 0===c?void 0:c.calculateSubTotal()]})})]})}),Object(l.jsxs)("tbody",{children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{className:"t3-col",children:Object(l.jsx)("p",{className:"p9 ft6",children:"Descontos(%)"})}),Object(l.jsx)("td",{className:"t3-col",children:Object(l.jsxs)("p",{className:"p9 ft1 p-right",children:[null===c||void 0===c?void 0:c.discount," %"]})})]}),Object(l.jsxs)("tr",{className:"t3-footer",children:[Object(l.jsx)("td",{className:"t3-col",children:Object(l.jsx)("p",{className:"p9 ft6",children:"TOTAL"})}),Object(l.jsx)("td",{className:"t3-col",children:Object(l.jsxs)("p",{className:"p9 ft1 p-right",children:["RS ",null===c||void 0===c?void 0:c.calculateTotal()]})})]})]})]})}),Object(l.jsx)("p",{className:"p3 ft2 pdt-30",children:"Observa\xe7\xf5es:"}),Object(l.jsx)("p",{className:"p1 pdb-30",children:null===c||void 0===c?void 0:c.notes})]})})})}),Object(l.jsxs)("div",{children:[Object(l.jsx)("button",{className:"uk-button uk-button-secondary uk-width-1-1 uk-margin-small-bottom",onClick:function(){var e=s.current||document.body;L.GenerateFilePdfDownload(e,(null===c||void 0===c?void 0:c.client.email)+".pdf")},children:"Baixar arquivo em PDF"}),Object(l.jsx)("button",{className:"uk-button uk-button-primary uk-width-1-1 uk-margin-small-bottom",onClick:n,children:"Enviar por email"})]})]})},J=function(){return Object(l.jsxs)(g.d,{children:[Object(l.jsx)(g.b,{path:"/",exact:!0,component:w}),Object(l.jsx)(g.b,{path:"/products",exact:!0,component:y}),Object(l.jsx)(g.b,{path:"/products/create",exact:!0,component:F}),Object(l.jsx)(g.b,{path:"/products/create/:productId",component:F}),Object(l.jsx)(g.b,{path:"/budgets",component:P}),Object(l.jsx)(g.b,{path:"/pdf",component:H}),Object(l.jsx)(g.a,{from:"*",to:"/"})]})};var z=function(){return Object(l.jsx)(a.a,{basename:"react-orcamento",children:Object(l.jsxs)(f,{children:[Object(l.jsx)(d,{}),Object(l.jsx)("br",{}),Object(l.jsx)("div",{className:"uk-container",children:Object(l.jsx)(J,{})})]})})};n.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(z,{})}),document.getElementById("root"))}},[[230,1,2]]]);
//# sourceMappingURL=main.48bda1a5.chunk.js.map